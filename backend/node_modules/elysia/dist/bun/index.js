// @bun
var o6=Object.create;var{defineProperty:T8,getPrototypeOf:n6,getOwnPropertyNames:u6}=Object;var c6=Object.prototype.hasOwnProperty;var a0=($,Y,X)=>{X=$!=null?o6(n6($)):{};const J=Y||!$||!$.__esModule?T8(X,"default",{value:$,enumerable:!0}):X;for(let Z of u6($))if(!c6.call(J,Z))T8(J,Z,{get:()=>$[Z],enumerable:!0});return J};var e=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var f0=e((m8)=>{Object.defineProperty(m8,"__esModule",{value:!0});m8.Type=m8.StandardType=m8.ExtendedTypeBuilder=m8.StandardTypeBuilder=m8.TypeBuilder=m8.TemplateLiteralDslParser=m8.TemplateLiteralGenerator=m8.TemplateLiteralFinite=m8.TemplateLiteralParser=m8.TemplateLiteralParserError=m8.TemplateLiteralResolver=m8.TemplateLiteralPattern=m8.UnionResolver=m8.KeyArrayResolver=m8.KeyResolver=m8.ObjectMap=m8.Intrinsic=m8.IndexedAccessor=m8.TypeClone=m8.TypeExtends=m8.TypeExtendsResult=m8.ExtendsUndefined=m8.TypeGuard=m8.TypeGuardUnknownTypeError=m8.ValueGuard=m8.FormatRegistry=m8.TypeRegistry=m8.PatternStringExact=m8.PatternNumberExact=m8.PatternBooleanExact=m8.PatternString=m8.PatternNumber=m8.PatternBoolean=m8.Kind=m8.Hint=m8.Optional=m8.Readonly=void 0;m8.Readonly=Symbol.for("TypeBox.Readonly");m8.Optional=Symbol.for("TypeBox.Optional");m8.Hint=Symbol.for("TypeBox.Hint");m8.Kind=Symbol.for("TypeBox.Kind");m8.PatternBoolean="(true|false)";m8.PatternNumber="(0|[1-9][0-9]*)";m8.PatternString="(.*)";m8.PatternBooleanExact=`^${m8.PatternBoolean}\$`;m8.PatternNumberExact=`^${m8.PatternNumber}\$`;m8.PatternStringExact=`^${m8.PatternString}\$`;var x1;(function($){const Y=new Map;function X(){return new Map(Y)}$.Entries=X;function J(){return Y.clear()}$.Clear=J;function Z(A){return Y.delete(A)}$.Delete=Z;function W(A){return Y.has(A)}$.Has=W;function q(A,D){Y.set(A,D)}$.Set=q;function M(A){return Y.get(A)}$.Get=M})(x1||(m8.TypeRegistry=x1={}));var v8;(function($){const Y=new Map;function X(){return new Map(Y)}$.Entries=X;function J(){return Y.clear()}$.Clear=J;function Z(A){return Y.delete(A)}$.Delete=Z;function W(A){return Y.has(A)}$.Has=W;function q(A,D){Y.set(A,D)}$.Set=q;function M(A){return Y.get(A)}$.Get=M})(v8||(m8.FormatRegistry=v8={}));var G;(function($){function Y(D){return typeof D==="object"&&D!==null}$.IsObject=Y;function X(D){return Array.isArray(D)}$.IsArray=X;function J(D){return typeof D==="boolean"}$.IsBoolean=J;function Z(D){return D===null}$.IsNull=Z;function W(D){return D===void 0}$.IsUndefined=W;function q(D){return typeof D==="bigint"}$.IsBigInt=q;function M(D){return typeof D==="number"}$.IsNumber=M;function A(D){return typeof D==="string"}$.IsString=A})(G||(m8.ValueGuard=G={}));class p8 extends Error{constructor($){super("TypeGuard: Unknown type");this.schema=$}}m8.TypeGuardUnknownTypeError=p8;var F;(function($){function Y(Q){try{return new RegExp(Q),!0}catch{return!1}}function X(Q){if(!G.IsString(Q))return!1;for(let b=0;b<Q.length;b++){const O=Q.charCodeAt(b);if(O>=7&&O<=13||O===27||O===127)return!1}return!0}function J(Q){return q(Q)||L(Q)}function Z(Q){return G.IsUndefined(Q)||G.IsBigInt(Q)}function W(Q){return G.IsUndefined(Q)||G.IsNumber(Q)}function q(Q){return G.IsUndefined(Q)||G.IsBoolean(Q)}function M(Q){return G.IsUndefined(Q)||G.IsString(Q)}function A(Q){return G.IsUndefined(Q)||G.IsString(Q)&&X(Q)&&Y(Q)}function D(Q){return G.IsUndefined(Q)||G.IsString(Q)&&X(Q)}function N(Q){return G.IsUndefined(Q)||L(Q)}function K(Q){return x(Q,"Any")&&M(Q.$id)}$.TAny=K;function w(Q){return x(Q,"Array")&&Q.type==="array"&&M(Q.$id)&&L(Q.items)&&W(Q.minItems)&&W(Q.maxItems)&&q(Q.uniqueItems)&&N(Q.contains)&&W(Q.minContains)&&W(Q.maxContains)}$.TArray=w;function B(Q){return x(Q,"AsyncIterator")&&Q.type==="AsyncIterator"&&M(Q.$id)&&L(Q.items)}$.TAsyncIterator=B;function C(Q){return x(Q,"BigInt")&&Q.type==="bigint"&&M(Q.$id)&&Z(Q.multipleOf)&&Z(Q.minimum)&&Z(Q.maximum)&&Z(Q.exclusiveMinimum)&&Z(Q.exclusiveMaximum)}$.TBigInt=C;function S(Q){return x(Q,"Boolean")&&Q.type==="boolean"&&M(Q.$id)}$.TBoolean=S;function I(Q){if(!(x(Q,"Constructor")&&Q.type==="constructor"&&M(Q.$id)&&G.IsArray(Q.parameters)&&L(Q.returns)))return!1;for(let b of Q.parameters)if(!L(b))return!1;return!0}$.TConstructor=I;function R(Q){return x(Q,"Date")&&Q.type==="Date"&&M(Q.$id)&&W(Q.minimumTimestamp)&&W(Q.maximumTimestamp)&&W(Q.exclusiveMinimumTimestamp)&&W(Q.exclusiveMaximumTimestamp)}$.TDate=R;function g(Q){if(!(x(Q,"Function")&&Q.type==="function"&&M(Q.$id)&&G.IsArray(Q.parameters)&&L(Q.returns)))return!1;for(let b of Q.parameters)if(!L(b))return!1;return!0}$.TFunction=g;function i(Q){return x(Q,"Integer")&&Q.type==="integer"&&M(Q.$id)&&W(Q.multipleOf)&&W(Q.minimum)&&W(Q.maximum)&&W(Q.exclusiveMinimum)&&W(Q.exclusiveMaximum)}$.TInteger=i;function j(Q){if(!(x(Q,"Intersect")&&G.IsArray(Q.allOf)&&M(Q.type)&&(q(Q.unevaluatedProperties)||N(Q.unevaluatedProperties))&&M(Q.$id)))return!1;if(("type"in Q)&&Q.type!=="object")return!1;for(let b of Q.allOf)if(!L(b))return!1;return!0}$.TIntersect=j;function E(Q){return x(Q,"Iterator")&&Q.type==="Iterator"&&M(Q.$id)&&L(Q.items)}$.TIterator=E;function x(Q,b){return F0(Q)&&Q[m8.Kind]===b}$.TKindOf=x;function F0(Q){return G.IsObject(Q)&&(m8.Kind in Q)&&G.IsString(Q[m8.Kind])}$.TKind=F0;function d(Q){return D0(Q)&&G.IsString(Q.const)}$.TLiteralString=d;function a(Q){return D0(Q)&&G.IsNumber(Q.const)}$.TLiteralNumber=a;function X0(Q){return D0(Q)&&G.IsBoolean(Q.const)}$.TLiteralBoolean=X0;function D0(Q){return x(Q,"Literal")&&M(Q.$id)&&(G.IsBoolean(Q.const)||G.IsNumber(Q.const)||G.IsString(Q.const))}$.TLiteral=D0;function v(Q){return x(Q,"Never")&&G.IsObject(Q.not)&&Object.getOwnPropertyNames(Q.not).length===0}$.TNever=v;function U0(Q){return x(Q,"Not")&&L(Q.not)}$.TNot=U0;function S0(Q){return x(Q,"Null")&&Q.type==="null"&&M(Q.$id)}$.TNull=S0;function y(Q){return x(Q,"Number")&&Q.type==="number"&&M(Q.$id)&&W(Q.multipleOf)&&W(Q.minimum)&&W(Q.maximum)&&W(Q.exclusiveMinimum)&&W(Q.exclusiveMaximum)}$.TNumber=y;function L0(Q){if(!(x(Q,"Object")&&Q.type==="object"&&M(Q.$id)&&G.IsObject(Q.properties)&&J(Q.additionalProperties)&&W(Q.minProperties)&&W(Q.maxProperties)))return!1;for(let[b,O]of Object.entries(Q.properties)){if(!X(b))return!1;if(!L(O))return!1}return!0}$.TObject=L0;function Q$(Q){return x(Q,"Promise")&&Q.type==="Promise"&&M(Q.$id)&&L(Q.item)}$.TPromise=Q$;function m(Q){if(!(x(Q,"Record")&&Q.type==="object"&&M(Q.$id)&&J(Q.additionalProperties)&&G.IsObject(Q.patternProperties)))return!1;const b=Object.getOwnPropertyNames(Q.patternProperties);if(b.length!==1)return!1;if(!Y(b[0]))return!1;if(!L(Q.patternProperties[b[0]]))return!1;return!0}$.TRecord=m;function N$(Q){return x(Q,"Ref")&&M(Q.$id)&&G.IsString(Q.$ref)}$.TRef=N$;function A$(Q){return x(Q,"String")&&Q.type==="string"&&M(Q.$id)&&W(Q.minLength)&&W(Q.maxLength)&&A(Q.pattern)&&D(Q.format)}$.TString=A$;function w$(Q){return x(Q,"Symbol")&&Q.type==="symbol"&&M(Q.$id)}$.TSymbol=w$;function C0(Q){return x(Q,"TemplateLiteral")&&Q.type==="string"&&G.IsString(Q.pattern)&&Q.pattern[0]==="^"&&Q.pattern[Q.pattern.length-1]==="$"}$.TTemplateLiteral=C0;function J0(Q){return x(Q,"This")&&M(Q.$id)&&G.IsString(Q.$ref)}$.TThis=J0;function Q0(Q){if(!(x(Q,"Tuple")&&Q.type==="array"&&M(Q.$id)&&G.IsNumber(Q.minItems)&&G.IsNumber(Q.maxItems)&&Q.minItems===Q.maxItems))return!1;if(G.IsUndefined(Q.items)&&G.IsUndefined(Q.additionalItems)&&Q.minItems===0)return!0;if(!G.IsArray(Q.items))return!1;for(let b of Q.items)if(!L(b))return!1;return!0}$.TTuple=Q0;function $0(Q){return x(Q,"Undefined")&&Q.type==="undefined"&&M(Q.$id)}$.TUndefined=$0;function p0(Q){return r0(Q)&&Q.anyOf.every((b)=>d(b)||a(b))}$.TUnionLiteral=p0;function r0(Q){if(!(x(Q,"Union")&&G.IsArray(Q.anyOf)&&M(Q.$id)))return!1;for(let b of Q.anyOf)if(!L(b))return!1;return!0}$.TUnion=r0;function k0(Q){return x(Q,"Uint8Array")&&Q.type==="Uint8Array"&&M(Q.$id)&&W(Q.minByteLength)&&W(Q.maxByteLength)}$.TUint8Array=k0;function m0(Q){return x(Q,"Unknown")&&M(Q.$id)}$.TUnknown=m0;function z0(Q){return x(Q,"Unsafe")}$.TUnsafe=z0;function z$(Q){return x(Q,"Void")&&Q.type==="void"&&M(Q.$id)}$.TVoid=z$;function D$(Q){return G.IsObject(Q)&&Q[m8.Readonly]==="Readonly"}$.TReadonly=D$;function U(Q){return G.IsObject(Q)&&Q[m8.Optional]==="Optional"}$.TOptional=U;function L(Q){return G.IsObject(Q)&&(K(Q)||w(Q)||S(Q)||C(Q)||B(Q)||I(Q)||R(Q)||g(Q)||i(Q)||j(Q)||E(Q)||D0(Q)||v(Q)||U0(Q)||S0(Q)||y(Q)||L0(Q)||Q$(Q)||m(Q)||N$(Q)||A$(Q)||w$(Q)||C0(Q)||J0(Q)||Q0(Q)||$0(Q)||r0(Q)||k0(Q)||m0(Q)||z0(Q)||z$(Q)||F0(Q)&&x1.Has(Q[m8.Kind]))}$.TSchema=L})(F||(m8.TypeGuard=F={}));var i8;(function($){function Y(X){if(X[m8.Kind]==="Undefined")return!0;if(X[m8.Kind]==="Not")return!Y(X.not);if(X[m8.Kind]==="Intersect")return X.allOf.every((Z)=>Y(Z));if(X[m8.Kind]==="Union")return X.anyOf.some((Z)=>Y(Z));return!1}$.Check=Y})(i8||(m8.ExtendsUndefined=i8={}));var P;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(P||(m8.TypeExtendsResult=P={}));var H$;(function($){function Y(H){return H===P.False?P.False:P.True}function X(H){return F.TNever(H)||F.TIntersect(H)||F.TUnion(H)||F.TUnknown(H)||F.TAny(H)}function J(H,z){if(F.TNever(z))return E(H,z);if(F.TIntersect(z))return R(H,z);if(F.TUnion(z))return j0(H,z);if(F.TUnknown(z))return I0(H,z);if(F.TAny(z))return Z(H,z);throw Error("TypeExtends: StructuralRight")}function Z(H,z){return P.True}function W(H,z){if(F.TIntersect(z))return R(H,z);if(F.TUnion(z)&&z.anyOf.some((u)=>F.TAny(u)||F.TUnknown(u)))return P.True;if(F.TUnion(z))return P.Union;if(F.TUnknown(z))return P.True;if(F.TAny(z))return P.True;return P.Union}function q(H,z){if(F.TUnknown(H))return P.False;if(F.TAny(H))return P.Union;if(F.TNever(H))return P.True;return P.False}function M(H,z){if(X(z))return J(H,z);if(F.TObject(z)&&C0(z))return P.True;if(!F.TArray(z))return P.False;return Y(l(H.items,z.items))}function A(H,z){if(X(z))return J(H,z);if(!F.TAsyncIterator(z))return P.False;return Y(l(H.items,z.items))}function D(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TBigInt(z)?P.True:P.False}function N(H,z){if(F.TLiteral(H)&&G.IsBoolean(H.const))return P.True;return F.TBoolean(H)?P.True:P.False}function K(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TBoolean(z)?P.True:P.False}function w(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(!F.TConstructor(z))return P.False;if(H.parameters.length>z.parameters.length)return P.False;if(!H.parameters.every((u,g0)=>Y(l(z.parameters[g0],u))===P.True))return P.False;return Y(l(H.returns,z.returns))}function B(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TDate(z)?P.True:P.False}function C(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(!F.TFunction(z))return P.False;if(H.parameters.length>z.parameters.length)return P.False;if(!H.parameters.every((u,g0)=>Y(l(z.parameters[g0],u))===P.True))return P.False;return Y(l(H.returns,z.returns))}function S(H,z){if(F.TLiteral(H)&&G.IsNumber(H.const))return P.True;return F.TNumber(H)||F.TInteger(H)?P.True:P.False}function I(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TInteger(z)||F.TNumber(z)?P.True:P.False}function R(H,z){return z.allOf.every((u)=>l(H,u)===P.True)?P.True:P.False}function g(H,z){return H.allOf.some((u)=>l(u,z)===P.True)?P.True:P.False}function i(H,z){if(X(z))return J(H,z);if(!F.TIterator(z))return P.False;return Y(l(H.items,z.items))}function j(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);if(F.TString(z))return D$(H,z);if(F.TNumber(z))return X0(H,z);if(F.TInteger(z))return S(H,z);if(F.TBoolean(z))return N(H,z);return F.TLiteral(z)&&z.const===H.const?P.True:P.False}function E(H,z){return P.False}function x(H,z){return P.True}function F0(H){let[z,u]=[H,0];while(!0){if(!F.TNot(z))break;z=z.not,u+=1}return u%2===0?z:m8.Type.Unknown()}function d(H,z){if(F.TNot(H))return l(F0(H),z);if(F.TNot(z))return l(H,F0(z));throw new Error("TypeExtends: Invalid fallthrough for Not")}function a(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TNull(z)?P.True:P.False}function X0(H,z){if(F.TLiteralNumber(H))return P.True;return F.TNumber(H)||F.TInteger(H)?P.True:P.False}function D0(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TInteger(z)||F.TNumber(z)?P.True:P.False}function v(H,z){return Object.getOwnPropertyNames(H.properties).length===z}function U0(H){return C0(H)}function S0(H){return v(H,0)||v(H,1)&&("description"in H.properties)&&F.TUnion(H.properties.description)&&H.properties.description.anyOf.length===2&&(F.TString(H.properties.description.anyOf[0])&&F.TUndefined(H.properties.description.anyOf[1])||F.TString(H.properties.description.anyOf[1])&&F.TUndefined(H.properties.description.anyOf[0]))}function y(H){return v(H,0)}function L0(H){return v(H,0)}function Q$(H){return v(H,0)}function m(H){return v(H,0)}function N$(H){return C0(H)}function A$(H){const z=m8.Type.Number();return v(H,0)||v(H,1)&&("length"in H.properties)&&Y(l(H.properties.length,z))===P.True}function w$(H){return v(H,0)}function C0(H){const z=m8.Type.Number();return v(H,0)||v(H,1)&&("length"in H.properties)&&Y(l(H.properties.length,z))===P.True}function J0(H){const z=m8.Type.Function([m8.Type.Any()],m8.Type.Any());return v(H,0)||v(H,1)&&("then"in H.properties)&&Y(l(H.properties.then,z))===P.True}function Q0(H,z){if(l(H,z)===P.False)return P.False;if(F.TOptional(H)&&!F.TOptional(z))return P.False;return P.True}function $0(H,z){if(F.TUnknown(H))return P.False;if(F.TAny(H))return P.Union;if(F.TNever(H))return P.True;if(F.TLiteralString(H)&&U0(z))return P.True;if(F.TLiteralNumber(H)&&y(z))return P.True;if(F.TLiteralBoolean(H)&&L0(z))return P.True;if(F.TSymbol(H)&&S0(z))return P.True;if(F.TBigInt(H)&&Q$(z))return P.True;if(F.TString(H)&&U0(z))return P.True;if(F.TSymbol(H)&&S0(z))return P.True;if(F.TNumber(H)&&y(z))return P.True;if(F.TInteger(H)&&y(z))return P.True;if(F.TBoolean(H)&&L0(z))return P.True;if(F.TUint8Array(H)&&N$(z))return P.True;if(F.TDate(H)&&m(z))return P.True;if(F.TConstructor(H)&&w$(z))return P.True;if(F.TFunction(H)&&A$(z))return P.True;if(F.TRecord(H)&&F.TString(k0(H)))return z[m8.Hint]==="Record"?P.True:P.False;if(F.TRecord(H)&&F.TNumber(k0(H)))return v(z,0)?P.True:P.False;return P.False}function p0(H,z){if(X(z))return J(H,z);if(F.TRecord(z))return z0(H,z);if(!F.TObject(z))return P.False;for(let u of Object.getOwnPropertyNames(z.properties)){if(!(u in H.properties))return P.False;if(Q0(H.properties[u],z.properties[u])===P.False)return P.False}return P.True}function r0(H,z){if(X(z))return J(H,z);if(F.TObject(z)&&J0(z))return P.True;if(!F.TPromise(z))return P.False;return Y(l(H.item,z.item))}function k0(H){if(m8.PatternNumberExact in H.patternProperties)return m8.Type.Number();if(m8.PatternStringExact in H.patternProperties)return m8.Type.String();throw Error("TypeExtends: Cannot get record key")}function m0(H){if(m8.PatternNumberExact in H.patternProperties)return H.patternProperties[m8.PatternNumberExact];if(m8.PatternStringExact in H.patternProperties)return H.patternProperties[m8.PatternStringExact];throw Error("TypeExtends: Cannot get record value")}function z0(H,z){const u=k0(z),g0=m0(z);if(F.TLiteralString(H)&&F.TNumber(u)&&Y(l(H,g0))===P.True)return P.True;if(F.TUint8Array(H)&&F.TNumber(u))return l(H,g0);if(F.TString(H)&&F.TNumber(u))return l(H,g0);if(F.TArray(H)&&F.TNumber(u))return l(H,g0);if(F.TObject(H)){for(let m6 of Object.getOwnPropertyNames(H.properties))if(Q0(g0,H.properties[m6])===P.False)return P.False;return P.True}return P.False}function z$(H,z){const u=m0(H);if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(!F.TRecord(z))return P.False;return l(u,m0(z))}function D$(H,z){if(F.TLiteral(H)&&G.IsString(H.const))return P.True;return F.TString(H)?P.True:P.False}function U(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TString(z)?P.True:P.False}function L(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TSymbol(z)?P.True:P.False}function Q(H,z){if(F.TTemplateLiteral(H))return l(o0.Resolve(H),z);if(F.TTemplateLiteral(z))return l(H,o0.Resolve(z));throw new Error("TypeExtends: Invalid fallthrough for TemplateLiteral")}function b(H,z){return F.TArray(z)&&H.items!==void 0&&H.items.every((u)=>l(u,z.items)===P.True)}function O(H,z){if(F.TNever(H))return P.True;if(F.TUnknown(H))return P.False;if(F.TAny(H))return P.Union;return P.False}function V(H,z){if(X(z))return J(H,z);if(F.TObject(z)&&C0(z))return P.True;if(F.TArray(z)&&b(H,z))return P.True;if(!F.TTuple(z))return P.False;if(G.IsUndefined(H.items)&&!G.IsUndefined(z.items)||!G.IsUndefined(H.items)&&G.IsUndefined(z.items))return P.False;if(G.IsUndefined(H.items)&&!G.IsUndefined(z.items))return P.True;return H.items.every((u,g0)=>l(u,z.items[g0])===P.True)?P.True:P.False}function s(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);return F.TUint8Array(z)?P.True:P.False}function B0(H,z){if(X(z))return J(H,z);if(F.TObject(z))return $0(H,z);if(F.TRecord(z))return z0(H,z);if(F.TVoid(z))return G1(H,z);return F.TUndefined(z)?P.True:P.False}function j0(H,z){return z.anyOf.some((u)=>l(H,u)===P.True)?P.True:P.False}function O0(H,z){return H.anyOf.every((u)=>l(u,z)===P.True)?P.True:P.False}function I0(H,z){return P.True}function P$(H,z){if(F.TNever(z))return E(H,z);if(F.TIntersect(z))return R(H,z);if(F.TUnion(z))return j0(H,z);if(F.TAny(z))return Z(H,z);if(F.TString(z))return D$(H,z);if(F.TNumber(z))return X0(H,z);if(F.TInteger(z))return S(H,z);if(F.TBoolean(z))return N(H,z);if(F.TArray(z))return q(H,z);if(F.TTuple(z))return O(H,z);if(F.TObject(z))return $0(H,z);return F.TUnknown(z)?P.True:P.False}function G1(H,z){if(F.TUndefined(H))return P.True;return F.TUndefined(H)?P.True:P.False}function f8(H,z){if(F.TIntersect(z))return R(H,z);if(F.TUnion(z))return j0(H,z);if(F.TUnknown(z))return I0(H,z);if(F.TAny(z))return Z(H,z);if(F.TObject(z))return $0(H,z);return F.TVoid(z)?P.True:P.False}function l(H,z){if(F.TTemplateLiteral(H)||F.TTemplateLiteral(z))return Q(H,z);if(F.TNot(H)||F.TNot(z))return d(H,z);if(F.TAny(H))return W(H,z);if(F.TArray(H))return M(H,z);if(F.TBigInt(H))return D(H,z);if(F.TBoolean(H))return K(H,z);if(F.TAsyncIterator(H))return A(H,z);if(F.TConstructor(H))return w(H,z);if(F.TDate(H))return B(H,z);if(F.TFunction(H))return C(H,z);if(F.TInteger(H))return I(H,z);if(F.TIntersect(H))return g(H,z);if(F.TIterator(H))return i(H,z);if(F.TLiteral(H))return j(H,z);if(F.TNever(H))return x(H,z);if(F.TNull(H))return a(H,z);if(F.TNumber(H))return D0(H,z);if(F.TObject(H))return p0(H,z);if(F.TRecord(H))return z$(H,z);if(F.TString(H))return U(H,z);if(F.TSymbol(H))return L(H,z);if(F.TTuple(H))return V(H,z);if(F.TPromise(H))return r0(H,z);if(F.TUint8Array(H))return s(H,z);if(F.TUndefined(H))return B0(H,z);if(F.TUnion(H))return O0(H,z);if(F.TUnknown(H))return P$(H,z);if(F.TVoid(H))return f8(H,z);throw Error(`TypeExtends: Unknown left type operand '${H[m8.Kind]}'`)}function p6(H,z){return l(H,z)}$.Extends=p6})(H$||(m8.TypeExtends=H$={}));var f;(function($){function Y(W){const q=Object.getOwnPropertyNames(W).reduce((A,D)=>({...A,[D]:J(W[D])}),{}),M=Object.getOwnPropertySymbols(W).reduce((A,D)=>({...A,[D]:J(W[D])}),{});return{...q,...M}}function X(W){return W.map((q)=>J(q))}function J(W){if(G.IsArray(W))return X(W);if(G.IsObject(W))return Y(W);return W}function Z(W,q={}){return{...J(W),...q}}$.Clone=Z})(f||(m8.TypeClone=f={}));var V1;(function($){function Y(B){return B.map((C)=>{const{[m8.Optional]:S,...I}=f.Clone(C);return I})}function X(B){return B.every((C)=>F.TOptional(C))}function J(B){return B.some((C)=>F.TOptional(C))}function Z(B){return X(B.allOf)?m8.Type.Optional(m8.Type.Intersect(Y(B.allOf))):B}function W(B){return J(B.anyOf)?m8.Type.Optional(m8.Type.Union(Y(B.anyOf))):B}function q(B){if(B[m8.Kind]==="Intersect")return Z(B);if(B[m8.Kind]==="Union")return W(B);return B}function M(B,C){const S=B.allOf.reduce((I,R)=>{const g=K(R,C);return g[m8.Kind]==="Never"?I:[...I,g]},[]);return q(m8.Type.Intersect(S))}function A(B,C){const S=B.anyOf.map((I)=>K(I,C));return q(m8.Type.Union(S))}function D(B,C){const S=B.properties[C];return G.IsUndefined(S)?m8.Type.Never():m8.Type.Union([S])}function N(B,C){const S=B.items;if(G.IsUndefined(S))return m8.Type.Never();const I=S[C];if(G.IsUndefined(I))return m8.Type.Never();return I}function K(B,C){if(B[m8.Kind]==="Intersect")return M(B,C);if(B[m8.Kind]==="Union")return A(B,C);if(B[m8.Kind]==="Object")return D(B,C);if(B[m8.Kind]==="Tuple")return N(B,C);return m8.Type.Never()}function w(B,C,S={}){const I=C.map((R)=>K(B,R.toString()));return q(m8.Type.Union(I,S))}$.Resolve=w})(V1||(m8.IndexedAccessor=V1={}));var S$;(function($){function Y(N){const[K,w]=[N.slice(0,1),N.slice(1)];return`${K.toLowerCase()}${w}`}function X(N){const[K,w]=[N.slice(0,1),N.slice(1)];return`${K.toUpperCase()}${w}`}function J(N){return N.toUpperCase()}function Z(N){return N.toLowerCase()}function W(N,K){const w=O$.ParseExact(N.pattern);if(!I$.Check(w))return{...N,pattern:q(N.pattern,K)};const S=[..._$.Generate(w)].map((g)=>m8.Type.Literal(g)),I=M(S,K),R=m8.Type.Union(I);return m8.Type.TemplateLiteral([R])}function q(N,K){return typeof N==="string"?K==="Uncapitalize"?Y(N):K==="Capitalize"?X(N):K==="Uppercase"?J(N):K==="Lowercase"?Z(N):N:N.toString()}function M(N,K){if(N.length===0)return[];const[w,...B]=N;return[D(w,K),...M(B,K)]}function A(N,K){if(F.TTemplateLiteral(N))return W(N,K);if(F.TUnion(N))return m8.Type.Union(M(N.anyOf,K));if(F.TLiteral(N))return m8.Type.Literal(q(N.const,K));return N}function D(N,K){return A(N,K)}$.Map=D})(S$||(m8.Intrinsic=S$={}));var L$;(function($){function Y(q,M){return m8.Type.Intersect(q.allOf.map((A)=>Z(A,M)),{...q})}function X(q,M){return m8.Type.Union(q.anyOf.map((A)=>Z(A,M)),{...q})}function J(q,M){return M(q)}function Z(q,M){if(q[m8.Kind]==="Intersect")return Y(q,M);if(q[m8.Kind]==="Union")return X(q,M);if(q[m8.Kind]==="Object")return J(q,M);return q}function W(q,M,A){return{...Z(f.Clone(q),M),...A}}$.Map=W})(L$||(m8.ObjectMap=L$={}));var e$;(function($){function Y(D){return D[0]==="^"&&D[D.length-1]==="$"?D.slice(1,D.length-1):D}function X(D,N){return D.allOf.reduce((K,w)=>[...K,...q(w,N)],[])}function J(D,N){const K=D.anyOf.map((w)=>q(w,N));return[...K.reduce((w,B)=>B.map((C)=>K.every((S)=>S.includes(C))?w.add(C):w)[0],new Set)]}function Z(D,N){return Object.getOwnPropertyNames(D.properties)}function W(D,N){return N.includePatterns?Object.getOwnPropertyNames(D.patternProperties):[]}function q(D,N){if(F.TIntersect(D))return X(D,N);if(F.TUnion(D))return J(D,N);if(F.TObject(D))return Z(D,N);if(F.TRecord(D))return W(D,N);return[]}function M(D,N){return[...new Set(q(D,N))]}$.ResolveKeys=M;function A(D){return`^(${M(D,{includePatterns:!0}).map((w)=>`(${Y(w)})`).join("|")})\$`}$.ResolvePattern=A})(e$||(m8.KeyResolver=e$={}));var g$;(function($){function Y(X){if(Array.isArray(X))return X;if(F.TUnionLiteral(X))return X.anyOf.map((J)=>J.const.toString());if(F.TLiteral(X))return[X.const];if(F.TTemplateLiteral(X)){const J=O$.ParseExact(X.pattern);if(!I$.Check(J))throw Error("KeyArrayResolver: Cannot resolve keys from infinite template expression");return[..._$.Generate(J)]}return[]}$.Resolve=Y})(g$||(m8.KeyArrayResolver=g$={}));var k1;(function($){function*Y(J){for(let Z of J.anyOf)if(Z[m8.Kind]==="Union")yield*Y(Z);else yield Z}function X(J){return m8.Type.Union([...Y(J)],{...J})}$.Resolve=X})(k1||(m8.UnionResolver=k1={}));var $1;(function($){function Y(Z){return Z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(Z,W){if(F.TTemplateLiteral(Z))return Z.pattern.slice(1,Z.pattern.length-1);else if(F.TUnion(Z))return`(${Z.anyOf.map((q)=>X(q,W)).join("|")})`;else if(F.TNumber(Z))return`${W}${m8.PatternNumber}`;else if(F.TInteger(Z))return`${W}${m8.PatternNumber}`;else if(F.TBigInt(Z))return`${W}${m8.PatternNumber}`;else if(F.TString(Z))return`${W}${m8.PatternString}`;else if(F.TLiteral(Z))return`${W}${Y(Z.const.toString())}`;else if(F.TBoolean(Z))return`${W}${m8.PatternBoolean}`;else if(F.TNever(Z))throw Error("TemplateLiteralPattern: TemplateLiteral cannot operate on types of TNever");else throw Error(`TemplateLiteralPattern: Unexpected Kind '${Z[m8.Kind]}'`)}function J(Z){return`^${Z.map((W)=>X(W,"")).join("")}$`}$.Create=J})($1||(m8.TemplateLiteralPattern=$1={}));var o0;(function($){function Y(X){const J=O$.ParseExact(X.pattern);if(!I$.Check(J))return m8.Type.String();const Z=[..._$.Generate(J)].map((W)=>m8.Type.Literal(W));return m8.Type.Union(Z)}$.Resolve=Y})(o0||(m8.TemplateLiteralResolver=o0={}));class Y1 extends Error{constructor($){super($)}}m8.TemplateLiteralParserError=Y1;var O$;(function($){function Y(B,C,S){return B[C]===S&&B.charCodeAt(C-1)!==92}function X(B,C){return Y(B,C,"(")}function J(B,C){return Y(B,C,")")}function Z(B,C){return Y(B,C,"|")}function W(B){if(!(X(B,0)&&J(B,B.length-1)))return!1;let C=0;for(let S=0;S<B.length;S++){if(X(B,S))C+=1;if(J(B,S))C-=1;if(C===0&&S!==B.length-1)return!1}return!0}function q(B){return B.slice(1,B.length-1)}function M(B){let C=0;for(let S=0;S<B.length;S++){if(X(B,S))C+=1;if(J(B,S))C-=1;if(Z(B,S)&&C===0)return!0}return!1}function A(B){for(let C=0;C<B.length;C++)if(X(B,C))return!0;return!1}function D(B){let[C,S]=[0,0];const I=[];for(let g=0;g<B.length;g++){if(X(B,g))C+=1;if(J(B,g))C-=1;if(Z(B,g)&&C===0){const i=B.slice(S,g);if(i.length>0)I.push(K(i));S=g+1}}const R=B.slice(S);if(R.length>0)I.push(K(R));if(I.length===0)return{type:"const",const:""};if(I.length===1)return I[0];return{type:"or",expr:I}}function N(B){function C(R,g){if(!X(R,g))throw new Y1("TemplateLiteralParser: Index must point to open parens");let i=0;for(let j=g;j<R.length;j++){if(X(R,j))i+=1;if(J(R,j))i-=1;if(i===0)return[g,j]}throw new Y1("TemplateLiteralParser: Unclosed group parens in expression")}function S(R,g){for(let i=g;i<R.length;i++)if(X(R,i))return[g,i];return[g,R.length]}const I=[];for(let R=0;R<B.length;R++)if(X(B,R)){const[g,i]=C(B,R),j=B.slice(g,i+1);I.push(K(j)),R=i}else{const[g,i]=S(B,R),j=B.slice(g,i);if(j.length>0)I.push(K(j));R=i-1}if(I.length===0)return{type:"const",const:""};if(I.length===1)return I[0];return{type:"and",expr:I}}function K(B){if(W(B))return K(q(B));if(M(B))return D(B);if(A(B))return N(B);return{type:"const",const:B}}$.Parse=K;function w(B){return K(B.slice(1,B.length-1))}$.ParseExact=w})(O$||(m8.TemplateLiteralParser=O$={}));var I$;(function($){function Y(W){return W.type==="or"&&W.expr.length===2&&W.expr[0].type==="const"&&W.expr[0].const==="0"&&W.expr[1].type==="const"&&W.expr[1].const==="[1-9][0-9]*"}function X(W){return W.type==="or"&&W.expr.length===2&&W.expr[0].type==="const"&&W.expr[0].const==="true"&&W.expr[1].type==="const"&&W.expr[1].const==="false"}function J(W){return W.type==="const"&&W.const===".*"}function Z(W){if(X(W))return!0;if(Y(W)||J(W))return!1;if(W.type==="and")return W.expr.every((q)=>Z(q));if(W.type==="or")return W.expr.every((q)=>Z(q));if(W.type==="const")return!0;throw Error("TemplateLiteralFinite: Unknown expression type")}$.Check=Z})(I$||(m8.TemplateLiteralFinite=I$={}));var _$;(function($){function*Y(q){if(q.length===1)return yield*q[0];for(let M of q[0])for(let A of Y(q.slice(1)))yield`${M}${A}`}function*X(q){return yield*Y(q.expr.map((M)=>[...W(M)]))}function*J(q){for(let M of q.expr)yield*W(M)}function*Z(q){return yield q.const}function*W(q){if(q.type==="and")return yield*X(q);if(q.type==="or")return yield*J(q);if(q.type==="const")return yield*Z(q);throw Error("TemplateLiteralGenerator: Unknown expression")}$.Generate=W})(_$||(m8.TemplateLiteralGenerator=_$={}));var g1;(function($){function*Y(W){const q=W.trim().replace(/"|'/g,"");if(q==="boolean")return yield m8.Type.Boolean();if(q==="number")return yield m8.Type.Number();if(q==="bigint")return yield m8.Type.BigInt();if(q==="string")return yield m8.Type.String();const M=q.split("|").map((A)=>m8.Type.Literal(A.trim()));return yield M.length===0?m8.Type.Never():M.length===1?M[0]:m8.Type.Union(M)}function*X(W){if(W[1]!=="{"){const q=m8.Type.Literal("$"),M=J(W.slice(1));return yield*[q,...M]}for(let q=2;q<W.length;q++)if(W[q]==="}"){const M=Y(W.slice(2,q)),A=J(W.slice(q+1));return yield*[...M,...A]}yield m8.Type.Literal(W)}function*J(W){for(let q=0;q<W.length;q++)if(W[q]==="$"){const M=m8.Type.Literal(W.slice(0,q)),A=X(W.slice(q));return yield*[M,...A]}yield m8.Type.Literal(W)}function Z(W){return[...J(W)]}$.Parse=Z})(g1||(m8.TemplateLiteralDslParser=g1={}));var h6=0;class f1{Create($){return $}Discard($,Y){const{[Y]:X,...J}=$;return J}Strict($){return JSON.parse(JSON.stringify($))}}m8.TypeBuilder=f1;class J1 extends f1{ReadonlyOptional($){return this.Readonly(this.Optional($))}Readonly($){return{...f.Clone($),[m8.Readonly]:"Readonly"}}Optional($){return{...f.Clone($),[m8.Optional]:"Optional"}}Any($={}){return this.Create({...$,[m8.Kind]:"Any"})}Array($,Y={}){return this.Create({...Y,[m8.Kind]:"Array",type:"array",items:f.Clone($)})}Boolean($={}){return this.Create({...$,[m8.Kind]:"Boolean",type:"boolean"})}Capitalize($,Y={}){return{...S$.Map(f.Clone($),"Capitalize"),...Y}}Composite($,Y){const X=m8.Type.Intersect($,{}),Z=e$.ResolveKeys(X,{includePatterns:!1}).reduce((W,q)=>({...W,[q]:m8.Type.Index(X,[q])}),{});return m8.Type.Object(Z,Y)}Enum($,Y={}){const J=Object.getOwnPropertyNames($).filter((Z)=>isNaN(Z)).map((Z)=>$[Z]).map((Z)=>G.IsString(Z)?{[m8.Kind]:"Literal",type:"string",const:Z}:{[m8.Kind]:"Literal",type:"number",const:Z});return this.Create({...Y,[m8.Kind]:"Union",anyOf:J})}Extends($,Y,X,J,Z={}){switch(H$.Extends($,Y)){case P.Union:return this.Union([f.Clone(X,Z),f.Clone(J,Z)]);case P.True:return f.Clone(X,Z);case P.False:return f.Clone(J,Z)}}Exclude($,Y,X={}){if(F.TTemplateLiteral($))return this.Exclude(o0.Resolve($),Y,X);if(F.TTemplateLiteral(Y))return this.Exclude($,o0.Resolve(Y),X);if(F.TUnion($)){const J=$.anyOf.filter((Z)=>H$.Extends(Z,Y)===P.False);return J.length===1?f.Clone(J[0],X):this.Union(J,X)}else return H$.Extends($,Y)!==P.False?this.Never(X):f.Clone($,X)}Extract($,Y,X={}){if(F.TTemplateLiteral($))return this.Extract(o0.Resolve($),Y,X);if(F.TTemplateLiteral(Y))return this.Extract($,o0.Resolve(Y),X);if(F.TUnion($)){const J=$.anyOf.filter((Z)=>H$.Extends(Z,Y)!==P.False);return J.length===1?f.Clone(J[0],X):this.Union(J,X)}else return H$.Extends($,Y)!==P.False?f.Clone($,X):this.Never(X)}Index($,Y,X={}){if(F.TArray($)&&F.TNumber(Y))return f.Clone($.items,X);else if(F.TTuple($)&&F.TNumber(Y)){const Z=(G.IsUndefined($.items)?[]:$.items).map((W)=>f.Clone(W));return this.Union(Z,X)}else{const J=g$.Resolve(Y),Z=f.Clone($);return V1.Resolve(Z,J,X)}}Integer($={}){return this.Create({...$,[m8.Kind]:"Integer",type:"integer"})}Intersect($,Y={}){if($.length===0)return m8.Type.Never();if($.length===1)return f.Clone($[0],Y);const X=$.every((W)=>F.TObject(W)),J=$.map((W)=>f.Clone(W)),Z=F.TSchema(Y.unevaluatedProperties)?{unevaluatedProperties:f.Clone(Y.unevaluatedProperties)}:{};if(Y.unevaluatedProperties===!1||F.TSchema(Y.unevaluatedProperties)||X)return this.Create({...Y,...Z,[m8.Kind]:"Intersect",type:"object",allOf:J});else return this.Create({...Y,...Z,[m8.Kind]:"Intersect",allOf:J})}KeyOf($,Y={}){if(F.TRecord($)){const X=Object.getOwnPropertyNames($.patternProperties)[0];if(X===m8.PatternNumberExact)return this.Number(Y);if(X===m8.PatternStringExact)return this.String(Y);throw Error("StandardTypeBuilder: Unable to resolve key type from Record key pattern")}else if(F.TTuple($)){const J=(G.IsUndefined($.items)?[]:$.items).map((Z,W)=>m8.Type.Literal(W));return this.Union(J,Y)}else if(F.TArray($))return this.Number(Y);else{const X=e$.ResolveKeys($,{includePatterns:!1});if(X.length===0)return this.Never(Y);const J=X.map((Z)=>this.Literal(Z));return this.Union(J,Y)}}Literal($,Y={}){return this.Create({...Y,[m8.Kind]:"Literal",const:$,type:typeof $})}Lowercase($,Y={}){return{...S$.Map(f.Clone($),"Lowercase"),...Y}}Never($={}){return this.Create({...$,[m8.Kind]:"Never",not:{}})}Not($,Y){return this.Create({...Y,[m8.Kind]:"Not",not:f.Clone($)})}Null($={}){return this.Create({...$,[m8.Kind]:"Null",type:"null"})}Number($={}){return this.Create({...$,[m8.Kind]:"Number",type:"number"})}Object($,Y={}){const X=Object.getOwnPropertyNames($),J=X.filter((M)=>F.TOptional($[M])),Z=X.filter((M)=>!J.includes(M)),W=F.TSchema(Y.additionalProperties)?{additionalProperties:f.Clone(Y.additionalProperties)}:{},q=X.reduce((M,A)=>({...M,[A]:f.Clone($[A])}),{});if(Z.length>0)return this.Create({...Y,...W,[m8.Kind]:"Object",type:"object",properties:q,required:Z});else return this.Create({...Y,...W,[m8.Kind]:"Object",type:"object",properties:q})}Omit($,Y,X={}){const J=g$.Resolve(Y);return L$.Map(f.Clone($),(Z)=>{if(G.IsArray(Z.required)){if(Z.required=Z.required.filter((W)=>!J.includes(W)),Z.required.length===0)delete Z.required}for(let W of Object.getOwnPropertyNames(Z.properties))if(J.includes(W))delete Z.properties[W];return this.Create(Z)},X)}Partial($,Y={}){return L$.Map($,(X)=>{const J=Object.getOwnPropertyNames(X.properties).reduce((Z,W)=>{return{...Z,[W]:this.Optional(X.properties[W])}},{});return this.Object(J,this.Discard(X,"required"))},Y)}Pick($,Y,X={}){const J=g$.Resolve(Y);return L$.Map(f.Clone($),(Z)=>{if(G.IsArray(Z.required)){if(Z.required=Z.required.filter((W)=>J.includes(W)),Z.required.length===0)delete Z.required}for(let W of Object.getOwnPropertyNames(Z.properties))if(!J.includes(W))delete Z.properties[W];return this.Create(Z)},X)}Record($,Y,X={}){if(F.TTemplateLiteral($)){const J=O$.ParseExact($.pattern);return I$.Check(J)?this.Object([..._$.Generate(J)].reduce((Z,W)=>({...Z,[W]:f.Clone(Y)}),{}),X):this.Create({...X,[m8.Kind]:"Record",type:"object",patternProperties:{[$.pattern]:f.Clone(Y)}})}else if(F.TUnion($)){const J=k1.Resolve($);if(F.TUnionLiteral(J)){const Z=J.anyOf.reduce((W,q)=>({...W,[q.const]:f.Clone(Y)}),{});return this.Object(Z,{...X,[m8.Hint]:"Record"})}else throw Error("StandardTypeBuilder: Record key of type union contains non-literal types")}else if(F.TLiteral($))if(G.IsString($.const)||G.IsNumber($.const))return this.Object({[$.const]:f.Clone(Y)},X);else throw Error("StandardTypeBuilder: Record key of type literal is not of type string or number");else if(F.TInteger($)||F.TNumber($))return this.Create({...X,[m8.Kind]:"Record",type:"object",patternProperties:{[m8.PatternNumberExact]:f.Clone(Y)}});else if(F.TString($)){const J=G.IsUndefined($.pattern)?m8.PatternStringExact:$.pattern;return this.Create({...X,[m8.Kind]:"Record",type:"object",patternProperties:{[J]:f.Clone(Y)}})}else throw Error("StandardTypeBuilder: Record key is an invalid type")}Recursive($,Y={}){if(G.IsUndefined(Y.$id))Y.$id=`T${h6++}`;const X=$({[m8.Kind]:"This",$ref:`${Y.$id}`});return X.$id=Y.$id,this.Create({...Y,[m8.Hint]:"Recursive",...X})}Ref($,Y={}){if(G.IsString($))return this.Create({...Y,[m8.Kind]:"Ref",$ref:$});if(G.IsUndefined($.$id))throw Error("StandardTypeBuilder.Ref: Target type must specify an $id");return this.Create({...Y,[m8.Kind]:"Ref",$ref:$.$id})}Required($,Y={}){return L$.Map($,(X)=>{const J=Object.getOwnPropertyNames(X.properties).reduce((Z,W)=>{return{...Z,[W]:this.Discard(X.properties[W],m8.Optional)}},{});return this.Object(J,X)},Y)}Rest($){if(F.TTuple($)){if(G.IsUndefined($.items))return[];return $.items.map((Y)=>f.Clone(Y))}else return[f.Clone($)]}String($={}){return this.Create({...$,[m8.Kind]:"String",type:"string"})}TemplateLiteral($,Y={}){const X=G.IsString($)?$1.Create(g1.Parse($)):$1.Create($);return this.Create({...Y,[m8.Kind]:"TemplateLiteral",type:"string",pattern:X})}Tuple($,Y={}){const[X,J,Z]=[!1,$.length,$.length],W=$.map((M)=>f.Clone(M)),q=$.length>0?{...Y,[m8.Kind]:"Tuple",type:"array",items:W,additionalItems:X,minItems:J,maxItems:Z}:{...Y,[m8.Kind]:"Tuple",type:"array",minItems:J,maxItems:Z};return this.Create(q)}Uncapitalize($,Y={}){return{...S$.Map(f.Clone($),"Uncapitalize"),...Y}}Union($,Y={}){if(F.TTemplateLiteral($))return o0.Resolve($);else{const X=$;if(X.length===0)return this.Never(Y);if(X.length===1)return this.Create(f.Clone(X[0],Y));const J=X.map((Z)=>f.Clone(Z));return this.Create({...Y,[m8.Kind]:"Union",anyOf:J})}}Unknown($={}){return this.Create({...$,[m8.Kind]:"Unknown"})}Unsafe($={}){return this.Create({...$,[m8.Kind]:$[m8.Kind]||"Unsafe"})}Uppercase($,Y={}){return{...S$.Map(f.Clone($),"Uppercase"),...Y}}}m8.StandardTypeBuilder=J1;class T1 extends J1{AsyncIterator($,Y={}){return this.Create({...Y,[m8.Kind]:"AsyncIterator",type:"AsyncIterator",items:f.Clone($)})}Awaited($,Y={}){const X=(J)=>{if(J.length===0)return J;const[Z,...W]=J;return[this.Awaited(Z),...X(W)]};return F.TIntersect($)?m8.Type.Intersect(X($.allOf)):F.TUnion($)?m8.Type.Union(X($.anyOf)):F.TPromise($)?this.Awaited($.item):f.Clone($,Y)}BigInt($={}){return this.Create({...$,[m8.Kind]:"BigInt",type:"bigint"})}ConstructorParameters($,Y={}){return this.Tuple([...$.parameters],{...Y})}Constructor($,Y,X){const J=f.Clone(Y),Z=$.map((W)=>f.Clone(W));return this.Create({...X,[m8.Kind]:"Constructor",type:"constructor",parameters:Z,returns:J})}Date($={}){return this.Create({...$,[m8.Kind]:"Date",type:"Date"})}Function($,Y,X){const J=f.Clone(Y,{}),Z=$.map((W)=>f.Clone(W));return this.Create({...X,[m8.Kind]:"Function",type:"function",parameters:Z,returns:J})}InstanceType($,Y={}){return f.Clone($.returns,Y)}Iterator($,Y={}){return this.Create({...Y,[m8.Kind]:"Iterator",type:"Iterator",items:f.Clone($)})}Parameters($,Y={}){return this.Tuple($.parameters,{...Y})}Promise($,Y={}){return this.Create({...Y,[m8.Kind]:"Promise",type:"Promise",item:f.Clone($)})}RegExp($,Y={}){const X=G.IsString($)?$:$.source;return this.Create({...Y,[m8.Kind]:"String",type:"string",pattern:X})}RegEx($,Y={}){return this.RegExp($,Y)}ReturnType($,Y={}){return f.Clone($.returns,Y)}Symbol($){return this.Create({...$,[m8.Kind]:"Symbol",type:"symbol"})}Undefined($={}){return this.Create({...$,[m8.Kind]:"Undefined",type:"undefined"})}Uint8Array($={}){return this.Create({...$,[m8.Kind]:"Uint8Array",type:"Uint8Array"})}Void($={}){return this.Create({...$,[m8.Kind]:"Void",type:"void"})}}m8.ExtendedTypeBuilder=T1;m8.StandardType=new J1;m8.Type=new T1});var c8=e((n8)=>{Object.defineProperty(n8,"__esModule",{value:!0});n8.TypeSystem=n8.TypeSystemDuplicateFormat=n8.TypeSystemDuplicateTypeKind=void 0;var R$=f0();class i1 extends Error{constructor($){super(`Duplicate type kind '${$}' detected`)}}n8.TypeSystemDuplicateTypeKind=i1;class p1 extends Error{constructor($){super(`Duplicate string format '${$}' detected`)}}n8.TypeSystemDuplicateFormat=p1;var o8;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObjects=!1,$.AllowNaN=!1,$.AllowVoidNull=!1;function Y(J,Z){if(R$.TypeRegistry.Has(J))throw new i1(J);return R$.TypeRegistry.Set(J,Z),(W={})=>R$.Type.Unsafe({...W,[R$.Kind]:J})}$.Type=Y;function X(J,Z){if(R$.FormatRegistry.Has(J))throw new p1(J);return R$.FormatRegistry.Set(J,Z),J}$.Format=X})(o8||(n8.TypeSystem=o8={}))});var d$=e((q$)=>{var jY=q$&&q$.__createBinding||(Object.create?function($,Y,X,J){if(J===void 0)J=X;var Z=Object.getOwnPropertyDescriptor(Y,X);if(!Z||("get"in Z?!Y.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Y[X]}};Object.defineProperty($,J,Z)}:function($,Y,X,J){if(J===void 0)J=X;$[J]=Y[X]}),OY=q$&&q$.__exportStar||function($,Y){for(var X in $)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(Y,X))jY(Y,$,X)};Object.defineProperty(q$,"__esModule",{value:!0});OY(c8(),q$)});var G0=e(($4)=>{var IY=function($){return Z1($)&&(Symbol.asyncIterator in $)},_Y=function($){return Z1($)&&(Symbol.iterator in $)},RY=function($){return ArrayBuffer.isView($)},bY=function($){return $ instanceof Promise},GY=function($){return $ instanceof Uint8Array},EY=function($){return $ instanceof Date},xY=function($,Y){return Y in $},VY=function($){return Z1($)&&a8($.constructor)&&$.constructor.name==="Object"},Z1=function($){return $!==null&&typeof $==="object"},kY=function($){return Array.isArray($)&&!ArrayBuffer.isView($)},h8=function($){return $===void 0},l8=function($){return $===null},t8=function($){return typeof $==="boolean"},m1=function($){return typeof $==="number"},gY=function($){return m1($)&&Number.isInteger($)},s8=function($){return typeof $==="bigint"},r8=function($){return typeof $==="string"},a8=function($){return typeof $==="function"},e8=function($){return typeof $==="symbol"},fY=function($){return s8($)||t8($)||l8($)||m1($)||r8($)||e8($)||h8($)};Object.defineProperty($4,"__esModule",{value:!0});$4.IsValueType=$4.IsSymbol=$4.IsFunction=$4.IsString=$4.IsBigInt=$4.IsInteger=$4.IsNumber=$4.IsBoolean=$4.IsNull=$4.IsUndefined=$4.IsArray=$4.IsObject=$4.IsPlainObject=$4.HasPropertyKey=$4.IsDate=$4.IsUint8Array=$4.IsPromise=$4.IsTypedArray=$4.IsIterator=$4.IsAsyncIterator=void 0;$4.IsAsyncIterator=IY;$4.IsIterator=_Y;$4.IsTypedArray=RY;$4.IsPromise=bY;$4.IsUint8Array=GY;$4.IsDate=EY;$4.HasPropertyKey=xY;$4.IsPlainObject=VY;$4.IsObject=Z1;$4.IsArray=kY;$4.IsUndefined=h8;$4.IsNull=l8;$4.IsBoolean=t8;$4.IsNumber=m1;$4.IsInteger=gY;$4.IsBigInt=s8;$4.IsString=r8;$4.IsFunction=a8;$4.IsSymbol=e8;$4.IsValueType=fY});var y$=e((W4)=>{var ZX=function($){N0(_0.Array);for(let Y of $)G$(Y)},WX=function($){N0(_0.Boolean),N0($?1:0)},QX=function($){N0(_0.BigInt),J4.setBigInt64(0,$);for(let Y of Z4)N0(Y)},zX=function($){N0(_0.Date),G$($.getTime())},HX=function($){N0(_0.Null)},qX=function($){N0(_0.Number),J4.setFloat64(0,$);for(let Y of Z4)N0(Y)},MX=function($){N0(_0.Object);for(let Y of globalThis.Object.keys($).sort())G$(Y),G$($[Y])},FX=function($){N0(_0.String);for(let Y=0;Y<$.length;Y++)N0($.charCodeAt(Y))},UX=function($){N0(_0.Symbol),G$($.description)},BX=function($){N0(_0.Uint8Array);for(let Y=0;Y<$.length;Y++)N0($[Y])},NX=function($){return N0(_0.Undefined)},G$=function($){if(T0.IsArray($))return ZX($);if(T0.IsBoolean($))return WX($);if(T0.IsBigInt($))return QX($);if(T0.IsDate($))return zX($);if(T0.IsNull($))return HX($);if(T0.IsNumber($))return qX($);if(T0.IsPlainObject($))return MX($);if(T0.IsString($))return FX($);if(T0.IsSymbol($))return UX($);if(T0.IsUint8Array($))return BX($);if(T0.IsUndefined($))return NX($);throw new o1($)},N0=function($){b$=b$^JX[$],b$=b$*YX%XX},AX=function($){return b$=BigInt("14695981039346656037"),G$($),b$};Object.defineProperty(W4,"__esModule",{value:!0});W4.Hash=W4.ByteMarker=W4.ValueHashError=void 0;var T0=G0();class o1 extends Error{constructor($){super("Hash: Unable to hash value");this.value=$}}W4.ValueHashError=o1;var _0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(_0||(W4.ByteMarker=_0={}));var b$=BigInt("14695981039346656037"),[YX,XX]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],JX=Array.from({length:256}).map(($,Y)=>BigInt(Y)),X4=new Float64Array(1),J4=new DataView(X4.buffer),Z4=new Uint8Array(X4.buffer);W4.Hash=AX});var q4=e((z4)=>{var c=function($){return $!==void 0},KX=function($,Y){return W1.TypeSystem.ExactOptionalPropertyTypes?Y in $:$[Y]!==void 0},h1=function($){const Y=Y0.IsObject($);return W1.TypeSystem.AllowArrayObjects?Y:Y&&!Y0.IsArray($)},SX=function($){return h1($)&&!($ instanceof Date)&&!($ instanceof Uint8Array)},n1=function($){const Y=Y0.IsNumber($);return W1.TypeSystem.AllowNaN?Y:Y&&Number.isFinite($)},LX=function($){const Y=Y0.IsUndefined($);return W1.TypeSystem.AllowVoidNull?Y||$===null:Y};function*CX($,Y,X,J){}function*jX($,Y,X,J){if(!Y0.IsArray(J))return yield{type:_.Array,schema:$,path:X,value:J,message:"Expected array"};if(c($.minItems)&&!(J.length>=$.minItems))yield{type:_.ArrayMinItems,schema:$,path:X,value:J,message:`Expected array length to be greater or equal to ${$.minItems}`};if(c($.maxItems)&&!(J.length<=$.maxItems))yield{type:_.ArrayMinItems,schema:$,path:X,value:J,message:`Expected array length to be less or equal to ${$.maxItems}`};for(let q=0;q<J.length;q++)yield*H0($.items,Y,`${X}/${q}`,J[q]);if($.uniqueItems===!0&&!function(){const q=new Set;for(let M of J){const A=PX.Hash(M);if(q.has(A))return!1;else q.add(A)}return!0}())yield{type:_.ArrayUniqueItems,schema:$,path:X,value:J,message:"Expected array elements to be unique"};if(!(c($.contains)||n1($.minContains)||n1($.maxContains)))return;const Z=c($.contains)?$.contains:E0.Type.Never(),W=J.reduce((q,M,A)=>H0(Z,Y,`${X}${A}`,M).next().done===!0?q+1:q,0);if(W===0)yield{type:_.ArrayContains,schema:$,path:X,value:J,message:"Expected array to contain at least one matching type"};if(Y0.IsNumber($.minContains)&&W<$.minContains)yield{type:_.ArrayMinContains,schema:$,path:X,value:J,message:`Expected array to contain at least ${$.minContains} matching types`};if(Y0.IsNumber($.maxContains)&&W>$.maxContains)yield{type:_.ArrayMaxContains,schema:$,path:X,value:J,message:`Expected array to contain no more than ${$.maxContains} matching types`}}function*OX($,Y,X,J){if(!Y0.IsAsyncIterator(J))yield{type:_.AsyncIterator,schema:$,path:X,value:J,message:"Expected value to be an async iterator"}}function*IX($,Y,X,J){if(!Y0.IsBigInt(J))return yield{type:_.BigInt,schema:$,path:X,value:J,message:"Expected bigint"};if(c($.multipleOf)&&J%$.multipleOf!==BigInt(0))yield{type:_.BigIntMultipleOf,schema:$,path:X,value:J,message:`Expected bigint to be a multiple of ${$.multipleOf}`};if(c($.exclusiveMinimum)&&!(J>$.exclusiveMinimum))yield{type:_.BigIntExclusiveMinimum,schema:$,path:X,value:J,message:`Expected bigint to be greater than ${$.exclusiveMinimum}`};if(c($.exclusiveMaximum)&&!(J<$.exclusiveMaximum))yield{type:_.BigIntExclusiveMaximum,schema:$,path:X,value:J,message:`Expected bigint to be less than ${$.exclusiveMaximum}`};if(c($.minimum)&&!(J>=$.minimum))yield{type:_.BigIntMinimum,schema:$,path:X,value:J,message:`Expected bigint to be greater or equal to ${$.minimum}`};if(c($.maximum)&&!(J<=$.maximum))yield{type:_.BigIntMaximum,schema:$,path:X,value:J,message:`Expected bigint to be less or equal to ${$.maximum}`}}function*_X($,Y,X,J){if(!Y0.IsBoolean(J))return yield{type:_.Boolean,schema:$,path:X,value:J,message:"Expected boolean"}}function*RX($,Y,X,J){yield*H0($.returns,Y,X,J.prototype)}function*bX($,Y,X,J){if(!Y0.IsDate(J))return yield{type:_.Date,schema:$,path:X,value:J,message:"Expected Date object"};if(!isFinite(J.getTime()))return yield{type:_.Date,schema:$,path:X,value:J,message:"Invalid Date"};if(c($.exclusiveMinimumTimestamp)&&!(J.getTime()>$.exclusiveMinimumTimestamp))yield{type:_.DateExclusiveMinimumTimestamp,schema:$,path:X,value:J,message:`Expected Date timestamp to be greater than ${$.exclusiveMinimum}`};if(c($.exclusiveMaximumTimestamp)&&!(J.getTime()<$.exclusiveMaximumTimestamp))yield{type:_.DateExclusiveMaximumTimestamp,schema:$,path:X,value:J,message:`Expected Date timestamp to be less than ${$.exclusiveMaximum}`};if(c($.minimumTimestamp)&&!(J.getTime()>=$.minimumTimestamp))yield{type:_.DateMinimumTimestamp,schema:$,path:X,value:J,message:`Expected Date timestamp to be greater or equal to ${$.minimum}`};if(c($.maximumTimestamp)&&!(J.getTime()<=$.maximumTimestamp))yield{type:_.DateMaximumTimestamp,schema:$,path:X,value:J,message:`Expected Date timestamp to be less or equal to ${$.maximum}`}}function*GX($,Y,X,J){if(!Y0.IsFunction(J))return yield{type:_.Function,schema:$,path:X,value:J,message:"Expected function"}}function*EX($,Y,X,J){if(!Y0.IsInteger(J))return yield{type:_.Integer,schema:$,path:X,value:J,message:"Expected integer"};if(c($.multipleOf)&&J%$.multipleOf!==0)yield{type:_.IntegerMultipleOf,schema:$,path:X,value:J,message:`Expected integer to be a multiple of ${$.multipleOf}`};if(c($.exclusiveMinimum)&&!(J>$.exclusiveMinimum))yield{type:_.IntegerExclusiveMinimum,schema:$,path:X,value:J,message:`Expected integer to be greater than ${$.exclusiveMinimum}`};if(c($.exclusiveMaximum)&&!(J<$.exclusiveMaximum))yield{type:_.IntegerExclusiveMaximum,schema:$,path:X,value:J,message:`Expected integer to be less than ${$.exclusiveMaximum}`};if(c($.minimum)&&!(J>=$.minimum))yield{type:_.IntegerMinimum,schema:$,path:X,value:J,message:`Expected integer to be greater or equal to ${$.minimum}`};if(c($.maximum)&&!(J<=$.maximum))yield{type:_.IntegerMaximum,schema:$,path:X,value:J,message:`Expected integer to be less or equal to ${$.maximum}`}}function*xX($,Y,X,J){for(let Z of $.allOf){const W=H0(Z,Y,X,J).next();if(!W.done){yield W.value,yield{type:_.Intersect,schema:$,path:X,value:J,message:"Expected all sub schemas to be valid"};return}}if($.unevaluatedProperties===!1){const Z=new RegExp(E0.KeyResolver.ResolvePattern($));for(let W of Object.getOwnPropertyNames(J))if(!Z.test(W))yield{type:_.IntersectUnevaluatedProperties,schema:$,path:`${X}/${W}`,value:J,message:"Unexpected property"}}if(typeof $.unevaluatedProperties==="object"){const Z=new RegExp(E0.KeyResolver.ResolvePattern($));for(let W of Object.getOwnPropertyNames(J))if(!Z.test(W)){const q=H0($.unevaluatedProperties,Y,`${X}/${W}`,J[W]).next();if(!q.done){yield q.value,yield{type:_.IntersectUnevaluatedProperties,schema:$,path:`${X}/${W}`,value:J,message:"Invalid additional property"};return}}}}function*VX($,Y,X,J){if(!(h1(J)&&(Symbol.iterator in J)))yield{type:_.Iterator,schema:$,path:X,value:J,message:"Expected value to be an iterator"}}function*kX($,Y,X,J){if(J!==$.const){const Z=typeof $.const==="string"?`'${$.const}'`:$.const;return yield{type:_.Literal,schema:$,path:X,value:J,message:`Expected ${Z}`}}}function*gX($,Y,X,J){yield{type:_.Never,schema:$,path:X,value:J,message:"Value cannot be validated"}}function*fX($,Y,X,J){if(H0($.not,Y,X,J).next().done===!0)yield{type:_.Not,schema:$,path:X,value:J,message:"Value should not validate"}}function*TX($,Y,X,J){if(!Y0.IsNull(J))return yield{type:_.Null,schema:$,path:X,value:J,message:"Expected null"}}function*dX($,Y,X,J){if(!n1(J))return yield{type:_.Number,schema:$,path:X,value:J,message:"Expected number"};if(c($.multipleOf)&&J%$.multipleOf!==0)yield{type:_.NumberMultipleOf,schema:$,path:X,value:J,message:`Expected number to be a multiple of ${$.multipleOf}`};if(c($.exclusiveMinimum)&&!(J>$.exclusiveMinimum))yield{type:_.NumberExclusiveMinimum,schema:$,path:X,value:J,message:`Expected number to be greater than ${$.exclusiveMinimum}`};if(c($.exclusiveMaximum)&&!(J<$.exclusiveMaximum))yield{type:_.NumberExclusiveMaximum,schema:$,path:X,value:J,message:`Expected number to be less than ${$.exclusiveMaximum}`};if(c($.minimum)&&!(J>=$.minimum))yield{type:_.NumberMinimum,schema:$,path:X,value:J,message:`Expected number to be greater or equal to ${$.minimum}`};if(c($.maximum)&&!(J<=$.maximum))yield{type:_.NumberMaximum,schema:$,path:X,value:J,message:`Expected number to be less or equal to ${$.maximum}`}}function*yX($,Y,X,J){if(!h1(J))return yield{type:_.Object,schema:$,path:X,value:J,message:"Expected object"};if(c($.minProperties)&&!(Object.getOwnPropertyNames(J).length>=$.minProperties))yield{type:_.ObjectMinProperties,schema:$,path:X,value:J,message:`Expected object to have at least ${$.minProperties} properties`};if(c($.maxProperties)&&!(Object.getOwnPropertyNames(J).length<=$.maxProperties))yield{type:_.ObjectMaxProperties,schema:$,path:X,value:J,message:`Expected object to have no more than ${$.maxProperties} properties`};const Z=Array.isArray($.required)?$.required:[],W=Object.getOwnPropertyNames($.properties),q=Object.getOwnPropertyNames(J);for(let M of W){const A=$.properties[M];if($.required&&$.required.includes(M)){if(yield*H0(A,Y,`${X}/${M}`,J[M]),E0.ExtendsUndefined.Check($)&&!(M in J))yield{type:_.ObjectRequiredProperties,schema:A,path:`${X}/${M}`,value:void 0,message:"Expected required property"}}else if(KX(J,M))yield*H0(A,Y,`${X}/${M}`,J[M])}for(let M of Z){if(q.includes(M))continue;yield{type:_.ObjectRequiredProperties,schema:$.properties[M],path:`${X}/${M}`,value:void 0,message:"Expected required property"}}if($.additionalProperties===!1){for(let M of q)if(!W.includes(M))yield{type:_.ObjectAdditionalProperties,schema:$,path:`${X}/${M}`,value:J[M],message:"Unexpected property"}}if(typeof $.additionalProperties==="object")for(let M of q){if(W.includes(M))continue;yield*H0($.additionalProperties,Y,`${X}/${M}`,J[M])}}function*vX($,Y,X,J){if(!Y0.IsPromise(J))yield{type:_.Promise,schema:$,path:X,value:J,message:"Expected Promise"}}function*iX($,Y,X,J){if(!SX(J))return yield{type:_.Object,schema:$,path:X,value:J,message:"Expected record object"};if(c($.minProperties)&&!(Object.getOwnPropertyNames(J).length>=$.minProperties))yield{type:_.ObjectMinProperties,schema:$,path:X,value:J,message:`Expected object to have at least ${$.minProperties} properties`};if(c($.maxProperties)&&!(Object.getOwnPropertyNames(J).length<=$.maxProperties))yield{type:_.ObjectMaxProperties,schema:$,path:X,value:J,message:`Expected object to have no more than ${$.maxProperties} properties`};const[Z,W]=Object.entries($.patternProperties)[0],q=new RegExp(Z);for(let[M,A]of Object.entries(J)){if(q.test(M)){yield*H0(W,Y,`${X}/${M}`,A);continue}if(typeof $.additionalProperties==="object")yield*H0($.additionalProperties,Y,`${X}/${M}`,A);if($.additionalProperties===!1){const D=`${X}/${M}`,N=`Unexpected property '${D}'`;return yield{type:_.ObjectAdditionalProperties,schema:$,path:D,value:A,message:N}}}}function*pX($,Y,X,J){const Z=Y.findIndex((q)=>q.$id===$.$ref);if(Z===-1)throw new Q1($);const W=Y[Z];yield*H0(W,Y,X,J)}function*mX($,Y,X,J){if(!Y0.IsString(J))return yield{type:_.String,schema:$,path:X,value:J,message:"Expected string"};if(c($.minLength)&&!(J.length>=$.minLength))yield{type:_.StringMinLength,schema:$,path:X,value:J,message:`Expected string length greater or equal to ${$.minLength}`};if(c($.maxLength)&&!(J.length<=$.maxLength))yield{type:_.StringMaxLength,schema:$,path:X,value:J,message:`Expected string length less or equal to ${$.maxLength}`};if(Y0.IsString($.pattern)){if(!new RegExp($.pattern).test(J))yield{type:_.StringPattern,schema:$,path:X,value:J,message:`Expected string to match pattern ${$.pattern}`}}if(Y0.IsString($.format)){if(!E0.FormatRegistry.Has($.format))yield{type:_.StringFormatUnknown,schema:$,path:X,value:J,message:`Unknown string format '${$.format}'`};else if(!E0.FormatRegistry.Get($.format)(J))yield{type:_.StringFormat,schema:$,path:X,value:J,message:`Expected string to match format '${$.format}'`}}}function*oX($,Y,X,J){if(!Y0.IsSymbol(J))return yield{type:_.Symbol,schema:$,path:X,value:J,message:"Expected symbol"}}function*nX($,Y,X,J){if(!Y0.IsString(J))return yield{type:_.String,schema:$,path:X,value:J,message:"Expected string"};if(!new RegExp($.pattern).test(J))yield{type:_.StringPattern,schema:$,path:X,value:J,message:`Expected string to match pattern ${$.pattern}`}}function*uX($,Y,X,J){const Z=Y.findIndex((q)=>q.$id===$.$ref);if(Z===-1)throw new Q1($);const W=Y[Z];yield*H0(W,Y,X,J)}function*cX($,Y,X,J){if(!Y0.IsArray(J))return yield{type:_.Array,schema:$,path:X,value:J,message:"Expected Array"};if($.items===void 0&&J.length!==0)return yield{type:_.TupleZeroLength,schema:$,path:X,value:J,message:"Expected tuple to have 0 elements"};if(J.length!==$.maxItems)yield{type:_.TupleLength,schema:$,path:X,value:J,message:`Expected tuple to have ${$.maxItems} elements`};if(!$.items)return;for(let Z=0;Z<$.items.length;Z++)yield*H0($.items[Z],Y,`${X}/${Z}`,J[Z])}function*hX($,Y,X,J){if(J!==void 0)yield{type:_.Undefined,schema:$,path:X,value:J,message:"Expected undefined"}}function*lX($,Y,X,J){const Z=[];for(let W of $.anyOf){const q=[...H0(W,Y,X,J)];if(q.length===0)return;Z.push(...q)}if(Z.length>0)yield{type:_.Union,schema:$,path:X,value:J,message:"Expected value of union"};for(let W of Z)yield W}function*tX($,Y,X,J){if(!Y0.IsUint8Array(J))return yield{type:_.Uint8Array,schema:$,path:X,value:J,message:"Expected Uint8Array"};if(c($.maxByteLength)&&!(J.length<=$.maxByteLength))yield{type:_.Uint8ArrayMaxByteLength,schema:$,path:X,value:J,message:`Expected Uint8Array to have a byte length less or equal to ${$.maxByteLength}`};if(c($.minByteLength)&&!(J.length>=$.minByteLength))yield{type:_.Uint8ArrayMinByteLength,schema:$,path:X,value:J,message:`Expected Uint8Array to have a byte length greater or equal to ${$.maxByteLength}`}}function*sX($,Y,X,J){}function*rX($,Y,X,J){if(!LX(J))return yield{type:_.Void,schema:$,path:X,value:J,message:"Expected void"}}function*aX($,Y,X,J){if(!E0.TypeRegistry.Get($[E0.Kind])($,J))return yield{type:_.Kind,schema:$,path:X,value:J,message:`Expected kind ${$[E0.Kind]}`}}function*H0($,Y,X,J){const Z=c($.$id)?[...Y,$]:Y,W=$;switch(W[E0.Kind]){case"Any":return yield*CX(W,Z,X,J);case"Array":return yield*jX(W,Z,X,J);case"AsyncIterator":return yield*OX(W,Z,X,J);case"BigInt":return yield*IX(W,Z,X,J);case"Boolean":return yield*_X(W,Z,X,J);case"Constructor":return yield*RX(W,Z,X,J);case"Date":return yield*bX(W,Z,X,J);case"Function":return yield*GX(W,Z,X,J);case"Integer":return yield*EX(W,Z,X,J);case"Intersect":return yield*xX(W,Z,X,J);case"Iterator":return yield*VX(W,Z,X,J);case"Literal":return yield*kX(W,Z,X,J);case"Never":return yield*gX(W,Z,X,J);case"Not":return yield*fX(W,Z,X,J);case"Null":return yield*TX(W,Z,X,J);case"Number":return yield*dX(W,Z,X,J);case"Object":return yield*yX(W,Z,X,J);case"Promise":return yield*vX(W,Z,X,J);case"Record":return yield*iX(W,Z,X,J);case"Ref":return yield*pX(W,Z,X,J);case"String":return yield*mX(W,Z,X,J);case"Symbol":return yield*oX(W,Z,X,J);case"TemplateLiteral":return yield*nX(W,Z,X,J);case"This":return yield*uX(W,Z,X,J);case"Tuple":return yield*cX(W,Z,X,J);case"Undefined":return yield*hX(W,Z,X,J);case"Union":return yield*lX(W,Z,X,J);case"Uint8Array":return yield*tX(W,Z,X,J);case"Unknown":return yield*sX(W,Z,X,J);case"Void":return yield*rX(W,Z,X,J);default:if(!E0.TypeRegistry.Has(W[E0.Kind]))throw new c1($);return yield*aX(W,Z,X,J)}}var eX=function(...$){const Y=$.length===3?H0($[0],$[1],"",$[2]):H0($[0],[],"",$[1]);return new u1(Y)};Object.defineProperty(z4,"__esModule",{value:!0});z4.Errors=z4.ValueErrorsDereferenceError=z4.ValueErrorsUnknownTypeError=z4.ValueErrorIterator=z4.ValueErrorType=void 0;var W1=d$(),E0=f0(),PX=y$(),Y0=G0(),_;(function($){$[$.Array=0]="Array",$[$.ArrayMinItems=1]="ArrayMinItems",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayContains=3]="ArrayContains",$[$.ArrayMinContains=4]="ArrayMinContains",$[$.ArrayMaxContains=5]="ArrayMaxContains",$[$.ArrayUniqueItems=6]="ArrayUniqueItems",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigInt=8]="BigInt",$[$.BigIntMultipleOf=9]="BigIntMultipleOf",$[$.BigIntExclusiveMinimum=10]="BigIntExclusiveMinimum",$[$.BigIntExclusiveMaximum=11]="BigIntExclusiveMaximum",$[$.BigIntMinimum=12]="BigIntMinimum",$[$.BigIntMaximum=13]="BigIntMaximum",$[$.Boolean=14]="Boolean",$[$.Date=15]="Date",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateExclusiveMaximumTimestamp=17]="DateExclusiveMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMaximumTimestamp=19]="DateMaximumTimestamp",$[$.Function=20]="Function",$[$.Integer=21]="Integer",$[$.IntegerMultipleOf=22]="IntegerMultipleOf",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerExclusiveMaximum=24]="IntegerExclusiveMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMaximum=26]="IntegerMaximum",$[$.Intersect=27]="Intersect",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Iterator=29]="Iterator",$[$.Literal=30]="Literal",$[$.Never=31]="Never",$[$.Not=32]="Not",$[$.Null=33]="Null",$[$.Number=34]="Number",$[$.NumberMultipleOf=35]="NumberMultipleOf",$[$.NumberExclusiveMinimum=36]="NumberExclusiveMinimum",$[$.NumberExclusiveMaximum=37]="NumberExclusiveMaximum",$[$.NumberMinimum=38]="NumberMinimum",$[$.NumberMaximum=39]="NumberMaximum",$[$.Object=40]="Object",$[$.ObjectMinProperties=41]="ObjectMinProperties",$[$.ObjectMaxProperties=42]="ObjectMaxProperties",$[$.ObjectAdditionalProperties=43]="ObjectAdditionalProperties",$[$.ObjectRequiredProperties=44]="ObjectRequiredProperties",$[$.Promise=45]="Promise",$[$.RecordKeyNumeric=46]="RecordKeyNumeric",$[$.RecordKeyString=47]="RecordKeyString",$[$.String=48]="String",$[$.StringMinLength=49]="StringMinLength",$[$.StringMaxLength=50]="StringMaxLength",$[$.StringPattern=51]="StringPattern",$[$.StringFormatUnknown=52]="StringFormatUnknown",$[$.StringFormat=53]="StringFormat",$[$.Symbol=54]="Symbol",$[$.TupleZeroLength=55]="TupleZeroLength",$[$.TupleLength=56]="TupleLength",$[$.Undefined=57]="Undefined",$[$.Union=58]="Union",$[$.Uint8Array=59]="Uint8Array",$[$.Uint8ArrayMinByteLength=60]="Uint8ArrayMinByteLength",$[$.Uint8ArrayMaxByteLength=61]="Uint8ArrayMaxByteLength",$[$.Void=62]="Void",$[$.Kind=63]="Kind"})(_||(z4.ValueErrorType=_={}));class u1{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}z4.ValueErrorIterator=u1;class c1 extends Error{constructor($){super("ValueErrors: Unknown type");this.schema=$}}z4.ValueErrorsUnknownTypeError=c1;class Q1 extends Error{constructor($){super(`ValueErrors: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}z4.ValueErrorsDereferenceError=Q1;z4.Errors=eX});var v$=e((M$)=>{var ZJ=M$&&M$.__createBinding||(Object.create?function($,Y,X,J){if(J===void 0)J=X;var Z=Object.getOwnPropertyDescriptor(Y,X);if(!Z||("get"in Z?!Y.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Y[X]}};Object.defineProperty($,J,Z)}:function($,Y,X,J){if(J===void 0)J=X;$[J]=Y[X]}),WJ=M$&&M$.__exportStar||function($,Y){for(var X in $)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(Y,X))ZJ(Y,$,X)};Object.defineProperty(M$,"__esModule",{value:!0});WJ(q4(),M$)});var z1=e((F4)=>{Object.defineProperty(F4,"__esModule",{value:!0});F4.ValuePointer=F4.ValuePointerRootDeleteError=F4.ValuePointerRootSetError=void 0;class l1 extends Error{constructor($,Y,X){super("ValuePointer: Cannot set root value");this.value=$,this.path=Y,this.update=X}}F4.ValuePointerRootSetError=l1;class t1 extends Error{constructor($,Y){super("ValuePointer: Cannot delete root value");this.value=$,this.path=Y}}F4.ValuePointerRootDeleteError=t1;var M4;(function($){function Y(M){return M.indexOf("~")===-1?M:M.replace(/~1/g,"/").replace(/~0/g,"~")}function*X(M){if(M==="")return;let[A,D]=[0,0];for(let N=0;N<M.length;N++)if(M.charAt(N)==="/")if(N===0)A=N+1;else D=N,yield Y(M.slice(A,D)),A=N+1;else D=N;yield Y(M.slice(A))}$.Format=X;function J(M,A,D){if(A==="")throw new l1(M,A,D);let[N,K,w]=[null,M,""];for(let B of X(A)){if(K[B]===void 0)K[B]={};N=K,K=K[B],w=B}N[w]=D}$.Set=J;function Z(M,A){if(A==="")throw new t1(M,A);let[D,N,K]=[null,M,""];for(let w of X(A)){if(N[w]===void 0||N[w]===null)return;D=N,N=N[w],K=w}if(Array.isArray(D)){const w=parseInt(K);D.splice(w,1)}else delete D[K]}$.Delete=Z;function W(M,A){if(A==="")return!0;let[D,N,K]=[null,M,""];for(let w of X(A)){if(N[w]===void 0)return!1;D=N,N=N[w],K=w}return Object.getOwnPropertyNames(D).includes(K)}$.Has=W;function q(M,A){if(A==="")return M;let D=M;for(let N of X(A)){if(D[N]===void 0)return;D=D[N]}return D}$.Get=q})(M4||(F4.ValuePointer=M4={}))});var E$=e((B4)=>{var HJ=function($){return[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)].reduce((X,J)=>({...X,[J]:s1($[J])}),{})},qJ=function($){return $.map((Y)=>s1(Y))},MJ=function($){return $.slice()},FJ=function($){return new Date($.toISOString())},UJ=function($){return $},BJ=function($){return $},NJ=function($){return $},AJ=function($){return $},wJ=function($){return $},s1=function($){if(n0.IsArray($))return qJ($);if(n0.IsAsyncIterator($))return BJ($);if(n0.IsFunction($))return AJ($);if(n0.IsIterator($))return NJ($);if(n0.IsPromise($))return wJ($);if(n0.IsDate($))return FJ($);if(n0.IsPlainObject($))return HJ($);if(n0.IsTypedArray($))return MJ($);if(n0.IsValueType($))return UJ($);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(B4,"__esModule",{value:!0});B4.Clone=void 0;var n0=G0();B4.Clone=s1});var $8=e((D4)=>{var i$=function($,Y){return{type:"update",path:$,value:Y}},A4=function($,Y){return{type:"insert",path:$,value:Y}},w4=function($){return{type:"delete",path:$}};function*DJ($,Y,X){if(!A0.IsPlainObject(X))return yield i$($,X);const J=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)],Z=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];for(let W of J){if(A0.IsSymbol(W))throw new x$(W);if(A0.IsUndefined(X[W])&&Z.includes(W))yield i$(`${$}/${String(W)}`,void 0)}for(let W of Z){if(A0.IsUndefined(Y[W])||A0.IsUndefined(X[W]))continue;if(A0.IsSymbol(W))throw new x$(W);yield*H1(`${$}/${String(W)}`,Y[W],X[W])}for(let W of Z){if(A0.IsSymbol(W))throw new x$(W);if(A0.IsUndefined(Y[W]))yield A4(`${$}/${String(W)}`,X[W])}for(let W of J.reverse()){if(A0.IsSymbol(W))throw new x$(W);if(A0.IsUndefined(X[W])&&!Z.includes(W))yield w4(`${$}/${String(W)}`)}}function*PJ($,Y,X){if(!A0.IsArray(X))return yield i$($,X);for(let J=0;J<Math.min(Y.length,X.length);J++)yield*H1(`${$}/${J}`,Y[J],X[J]);for(let J=0;J<X.length;J++){if(J<Y.length)continue;yield A4(`${$}/${J}`,X[J])}for(let J=Y.length-1;J>=0;J--){if(J<X.length)continue;yield w4(`${$}/${J}`)}}function*KJ($,Y,X){if(!A0.IsTypedArray(X)||Y.length!==X.length||Object.getPrototypeOf(Y).constructor.name!==Object.getPrototypeOf(X).constructor.name)return yield i$($,X);for(let J=0;J<Math.min(Y.length,X.length);J++)yield*H1(`${$}/${J}`,Y[J],X[J])}function*SJ($,Y,X){if(Y===X)return;yield i$($,X)}function*H1($,Y,X){if(A0.IsPlainObject(Y))return yield*DJ($,Y,X);if(A0.IsArray(Y))return yield*PJ($,Y,X);if(A0.IsTypedArray(Y))return yield*KJ($,Y,X);if(A0.IsValueType(Y))return yield*SJ($,Y,X);throw new e1(Y)}var LJ=function($,Y){return[...H1("",$,Y)]},CJ=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},jJ=function($){return $.length===0},OJ=function($,Y){if(CJ(Y))return a1.Clone(Y[0].value);if(jJ(Y))return a1.Clone($);const X=a1.Clone($);for(let J of Y)switch(J.type){case"insert":{r1.ValuePointer.Set(X,J.path,J.value);break}case"update":{r1.ValuePointer.Set(X,J.path,J.value);break}case"delete":{r1.ValuePointer.Delete(X,J.path);break}}return X};Object.defineProperty(D4,"__esModule",{value:!0});D4.Patch=D4.Diff=D4.ValueDeltaUnableToDiffUnknownValue=D4.ValueDeltaObjectWithSymbolKeyError=D4.Edit=D4.Delete=D4.Update=D4.Insert=void 0;var x0=f0(),r1=z1(),A0=G0(),a1=E$();D4.Insert=x0.Type.Object({type:x0.Type.Literal("insert"),path:x0.Type.String(),value:x0.Type.Unknown()});D4.Update=x0.Type.Object({type:x0.Type.Literal("update"),path:x0.Type.String(),value:x0.Type.Unknown()});D4.Delete=x0.Type.Object({type:x0.Type.Literal("delete"),path:x0.Type.String()});D4.Edit=x0.Type.Union([D4.Insert,D4.Update,D4.Delete]);class x$ extends Error{constructor($){super("ValueDelta: Cannot diff objects with symbol keys");this.key=$}}D4.ValueDeltaObjectWithSymbolKeyError=x$;class e1 extends Error{constructor($){super("ValueDelta: Unable to create diff edits for unknown value");this.value=$}}D4.ValueDeltaUnableToDiffUnknownValue=e1;D4.Diff=LJ;D4.Patch=OJ});var I4=e((j4)=>{var GJ=function($,Y,X,J){if(!R0.IsPlainObject(X))q1.ValuePointer.Set($,Y,Y8.Clone(J));else{const Z=Object.keys(X),W=Object.keys(J);for(let q of Z)if(!W.includes(q))delete X[q];for(let q of W)if(!Z.includes(q))X[q]=null;for(let q of W)Z8($,`${Y}/${q}`,X[q],J[q])}},EJ=function($,Y,X,J){if(!R0.IsArray(X))q1.ValuePointer.Set($,Y,Y8.Clone(J));else{for(let Z=0;Z<J.length;Z++)Z8($,`${Y}/${Z}`,X[Z],J[Z]);X.splice(J.length)}},xJ=function($,Y,X,J){if(R0.IsTypedArray(X)&&X.length===J.length)for(let Z=0;Z<X.length;Z++)X[Z]=J[Z];else q1.ValuePointer.Set($,Y,Y8.Clone(J))},VJ=function($,Y,X,J){if(X===J)return;q1.ValuePointer.Set($,Y,J)},Z8=function($,Y,X,J){if(R0.IsArray(J))return EJ($,Y,X,J);if(R0.IsTypedArray(J))return xJ($,Y,X,J);if(R0.IsPlainObject(J))return GJ($,Y,X,J);if(R0.IsValueType(J))return VJ($,Y,X,J)},C4=function($){return R0.IsTypedArray($)||R0.IsValueType($)},kJ=function($,Y){return R0.IsPlainObject($)&&R0.IsArray(Y)||R0.IsArray($)&&R0.IsPlainObject(Y)},gJ=function($,Y){if(C4($)||C4(Y))throw new J8;if(kJ($,Y))throw new X8;Z8($,"",$,Y)};Object.defineProperty(j4,"__esModule",{value:!0});j4.Mutate=j4.ValueMutateInvalidRootMutationError=j4.ValueMutateTypeMismatchError=void 0;var q1=z1(),Y8=E$(),R0=G0();class X8 extends Error{constructor(){super("ValueMutate: Cannot assign due type mismatch of assignable values")}}j4.ValueMutateTypeMismatchError=X8;class J8 extends Error{constructor(){super("ValueMutate: Only object and array types can be mutated at the root level")}}j4.ValueMutateInvalidRootMutationError=J8;j4.Mutate=gJ});var b4=e((_4)=>{var dJ=function($,Y){if(!u0.IsPlainObject(Y))return!1;const X=[...Object.keys($),...Object.getOwnPropertySymbols($)],J=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];if(X.length!==J.length)return!1;return X.every((Z)=>M1($[Z],Y[Z]))},yJ=function($,Y){return u0.IsDate(Y)&&$.getTime()===Y.getTime()},vJ=function($,Y){if(!u0.IsArray(Y)||$.length!==Y.length)return!1;return $.every((X,J)=>M1(X,Y[J]))},iJ=function($,Y){if(!u0.IsTypedArray(Y)||$.length!==Y.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return!1;return $.every((X,J)=>M1(X,Y[J]))},pJ=function($,Y){return $===Y},M1=function($,Y){if(u0.IsPlainObject($))return dJ($,Y);if(u0.IsDate($))return yJ($,Y);if(u0.IsTypedArray($))return iJ($,Y);if(u0.IsArray($))return vJ($,Y);if(u0.IsValueType($))return pJ($,Y);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(_4,"__esModule",{value:!0});_4.Equal=void 0;var u0=G0();_4.Equal=M1});var p$=e((G4)=>{var oJ=function($){return $[W0.Kind]==="Any"||$[W0.Kind]==="Unknown"},o=function($){return $!==void 0},nJ=function($,Y){return F1.TypeSystem.ExactOptionalPropertyTypes?Y in $:$[Y]!==void 0},B1=function($){const Y=c0.IsObject($);return F1.TypeSystem.AllowArrayObjects?Y:Y&&!c0.IsArray($)},uJ=function($){return B1($)&&!($ instanceof Date)&&!($ instanceof Uint8Array)},V$=function($){const Y=c0.IsNumber($);return F1.TypeSystem.AllowNaN?Y:Y&&Number.isFinite($)},cJ=function($){const Y=c0.IsUndefined($);return F1.TypeSystem.AllowVoidNull?Y||$===null:Y},hJ=function($,Y,X){return!0},lJ=function($,Y,X){if(!Array.isArray(X))return!1;if(o($.minItems)&&!(X.length>=$.minItems))return!1;if(o($.maxItems)&&!(X.length<=$.maxItems))return!1;if(!X.every((W)=>q0($.items,Y,W)))return!1;if($.uniqueItems===!0&&!function(){const W=new Set;for(let q of X){const M=mJ.Hash(q);if(W.has(M))return!1;else W.add(M)}return!0}())return!1;if(!(o($.contains)||V$($.minContains)||V$($.maxContains)))return!0;const J=o($.contains)?$.contains:W0.Type.Never(),Z=X.reduce((W,q)=>q0(J,Y,q)?W+1:W,0);if(Z===0)return!1;if(V$($.minContains)&&Z<$.minContains)return!1;if(V$($.maxContains)&&Z>$.maxContains)return!1;return!0},tJ=function($,Y,X){return B1(X)&&(Symbol.asyncIterator in X)},sJ=function($,Y,X){if(!c0.IsBigInt(X))return!1;if(o($.multipleOf)&&X%$.multipleOf!==BigInt(0))return!1;if(o($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if(o($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if(o($.minimum)&&!(X>=$.minimum))return!1;if(o($.maximum)&&!(X<=$.maximum))return!1;return!0},rJ=function($,Y,X){return typeof X==="boolean"},aJ=function($,Y,X){return q0($.returns,Y,X.prototype)},eJ=function($,Y,X){if(!(X instanceof Date))return!1;if(!V$(X.getTime()))return!1;if(o($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))return!1;if(o($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))return!1;if(o($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))return!1;if(o($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))return!1;return!0},$Z=function($,Y,X){return typeof X==="function"},YZ=function($,Y,X){if(!c0.IsInteger(X))return!1;if(o($.multipleOf)&&X%$.multipleOf!==0)return!1;if(o($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if(o($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if(o($.minimum)&&!(X>=$.minimum))return!1;if(o($.maximum)&&!(X<=$.maximum))return!1;return!0},XZ=function($,Y,X){const J=$.allOf.every((Z)=>q0(Z,Y,X));if($.unevaluatedProperties===!1){const Z=new RegExp(W0.KeyResolver.ResolvePattern($)),W=Object.getOwnPropertyNames(X).every((q)=>Z.test(q));return J&&W}else if(W0.TypeGuard.TSchema($.unevaluatedProperties)){const Z=new RegExp(W0.KeyResolver.ResolvePattern($)),W=Object.getOwnPropertyNames(X).every((q)=>Z.test(q)||q0($.unevaluatedProperties,Y,X[q]));return J&&W}else return J},JZ=function($,Y,X){return B1(X)&&(Symbol.iterator in X)},ZZ=function($,Y,X){return X===$.const},WZ=function($,Y,X){return!1},QZ=function($,Y,X){return!q0($.not,Y,X)},zZ=function($,Y,X){return X===null},HZ=function($,Y,X){if(!V$(X))return!1;if(o($.multipleOf)&&X%$.multipleOf!==0)return!1;if(o($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if(o($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if(o($.minimum)&&!(X>=$.minimum))return!1;if(o($.maximum)&&!(X<=$.maximum))return!1;return!0},qZ=function($,Y,X){if(!B1(X))return!1;if(o($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))return!1;if(o($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))return!1;const J=Object.getOwnPropertyNames($.properties);for(let Z of J){const W=$.properties[Z];if($.required&&$.required.includes(Z)){if(!q0(W,Y,X[Z]))return!1;if((W0.ExtendsUndefined.Check(W)||oJ(W))&&!(Z in X))return!1}else if(nJ(X,Z)&&!q0(W,Y,X[Z]))return!1}if($.additionalProperties===!1){const Z=Object.getOwnPropertyNames(X);if($.required&&$.required.length===J.length&&Z.length===J.length)return!0;else return Z.every((W)=>J.includes(W))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(X).every((W)=>J.includes(W)||q0($.additionalProperties,Y,X[W]));else return!0},MZ=function($,Y,X){return typeof X==="object"&&typeof X.then==="function"},FZ=function($,Y,X){if(!uJ(X))return!1;if(o($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))return!1;if(o($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))return!1;const[J,Z]=Object.entries($.patternProperties)[0],W=new RegExp(J);return Object.entries(X).every(([q,M])=>{if(W.test(q))return q0(Z,Y,M);if(typeof $.additionalProperties==="object")return q0($.additionalProperties,Y,M);if($.additionalProperties===!1)return!1;return!0})},UZ=function($,Y,X){const J=Y.findIndex((W)=>W.$id===$.$ref);if(J===-1)throw new U1($);const Z=Y[J];return q0(Z,Y,X)},BZ=function($,Y,X){if(!c0.IsString(X))return!1;if(o($.minLength)){if(!(X.length>=$.minLength))return!1}if(o($.maxLength)){if(!(X.length<=$.maxLength))return!1}if(o($.pattern)){if(!new RegExp($.pattern).test(X))return!1}if(o($.format)){if(!W0.FormatRegistry.Has($.format))return!1;return W0.FormatRegistry.Get($.format)(X)}return!0},NZ=function($,Y,X){if(typeof X!=="symbol")return!1;return!0},AZ=function($,Y,X){if(!c0.IsString(X))return!1;return new RegExp($.pattern).test(X)},wZ=function($,Y,X){const J=Y.findIndex((W)=>W.$id===$.$ref);if(J===-1)throw new U1($);const Z=Y[J];return q0(Z,Y,X)},DZ=function($,Y,X){if(!c0.IsArray(X))return!1;if($.items===void 0&&X.length!==0)return!1;if(X.length!==$.maxItems)return!1;if(!$.items)return!0;for(let J=0;J<$.items.length;J++)if(!q0($.items[J],Y,X[J]))return!1;return!0},PZ=function($,Y,X){return X===void 0},KZ=function($,Y,X){return $.anyOf.some((J)=>q0(J,Y,X))},SZ=function($,Y,X){if(!(X instanceof Uint8Array))return!1;if(o($.maxByteLength)&&!(X.length<=$.maxByteLength))return!1;if(o($.minByteLength)&&!(X.length>=$.minByteLength))return!1;return!0},LZ=function($,Y,X){return!0},CZ=function($,Y,X){return cJ(X)},jZ=function($,Y,X){if(!W0.TypeRegistry.Has($[W0.Kind]))return!1;return W0.TypeRegistry.Get($[W0.Kind])($,X)},q0=function($,Y,X){const J=o($.$id)?[...Y,$]:Y,Z=$;switch(Z[W0.Kind]){case"Any":return hJ(Z,J,X);case"Array":return lJ(Z,J,X);case"AsyncIterator":return tJ(Z,J,X);case"BigInt":return sJ(Z,J,X);case"Boolean":return rJ(Z,J,X);case"Constructor":return aJ(Z,J,X);case"Date":return eJ(Z,J,X);case"Function":return $Z(Z,J,X);case"Integer":return YZ(Z,J,X);case"Intersect":return XZ(Z,J,X);case"Iterator":return JZ(Z,J,X);case"Literal":return ZZ(Z,J,X);case"Never":return WZ(Z,J,X);case"Not":return QZ(Z,J,X);case"Null":return zZ(Z,J,X);case"Number":return HZ(Z,J,X);case"Object":return qZ(Z,J,X);case"Promise":return MZ(Z,J,X);case"Record":return FZ(Z,J,X);case"Ref":return UZ(Z,J,X);case"String":return BZ(Z,J,X);case"Symbol":return NZ(Z,J,X);case"TemplateLiteral":return AZ(Z,J,X);case"This":return wZ(Z,J,X);case"Tuple":return DZ(Z,J,X);case"Undefined":return PZ(Z,J,X);case"Union":return KZ(Z,J,X);case"Uint8Array":return SZ(Z,J,X);case"Unknown":return LZ(Z,J,X);case"Void":return CZ(Z,J,X);default:if(!W0.TypeRegistry.Has(Z[W0.Kind]))throw new W8(Z);return jZ(Z,J,X)}},OZ=function(...$){return $.length===3?q0($[0],$[1],$[2]):q0($[0],[],$[1])};Object.defineProperty(G4,"__esModule",{value:!0});G4.Check=G4.ValueCheckDereferenceError=G4.ValueCheckUnknownTypeError=void 0;var F1=d$(),W0=f0(),c0=G0(),mJ=y$();class W8 extends Error{constructor($){super(`ValueCheck: ${$[W0.Kind]?`Unknown type '${$[W0.Kind]}'`:"Unknown type"}`);this.schema=$}}G4.ValueCheckUnknownTypeError=W8;class U1 extends Error{constructor($){super(`ValueCheck: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}G4.ValueCheckDereferenceError=U1;G4.Check=OZ});var U8=e((k4)=>{var bZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return{}},GZ=function($,Y){if($.uniqueItems===!0&&!n.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if(("contains"in $)&&!n.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in $)return $.default;else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((X)=>{return b0($.items,Y)});else return[]},EZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return async function*(){}()},xZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return BigInt(0)},VZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return!1},kZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else{const X=b0($.returns,Y);if(typeof X==="object"&&!Array.isArray(X))return class{constructor(){for(let[J,Z]of Object.entries(X)){const W=this;W[J]=Z}}};else return class{}}},gZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date(0)},fZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return()=>b0($.returns,Y)},TZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},dZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else{const X=$.allOf.reduce((J,Z)=>{const W=b0(Z,Y);return typeof W==="object"?{...J,...W}:W},{});if(!RZ.Check($,Y,X))throw new q8($);return X}},yZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return function*(){}()},vZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return $.const},iZ=function($,Y){throw new z8($)},pZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else throw new H8($)},mZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return null},oZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},nZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else{const X=new Set($.required);return $.default||Object.entries($.properties).reduce((J,[Z,W])=>{return X.has(Z)?{...J,[Z]:b0(W,Y)}:{...J}},{})}},uZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return Promise.resolve(b0($.item,Y))},cZ=function($,Y){const[X,J]=Object.entries($.patternProperties)[0];if(n.HasPropertyKey($,"default"))return $.default;else if(!(X===$$.PatternStringExact||X===$$.PatternNumberExact))return X.slice(1,X.length-1).split("|").reduce((W,q)=>{return{...W,[q]:b0(J,Y)}},{});else return{}},hZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else{const X=Y.findIndex((Z)=>Z.$id===$.$ref);if(X===-1)throw new N1($);const J=Y[X];return b0(J,Y)}},lZ=function($,Y){if($.pattern!==void 0)if(!n.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return $.default;else if($.format!==void 0)if(!n.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return $.default;else if(n.HasPropertyKey($,"default"))return $.default;else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>".").join("");else return""},tZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else if("value"in $)return Symbol.for($.value);else return Symbol()},sZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;const X=$$.TemplateLiteralParser.ParseExact($.pattern);if(!$$.TemplateLiteralFinite.Check(X))throw new M8($);return $$.TemplateLiteralGenerator.Generate(X).next().value},rZ=function($,Y){if(V4++>x4)throw new F8($,x4);if(n.HasPropertyKey($,"default"))return $.default;else{const X=Y.findIndex((Z)=>Z.$id===$.$ref);if(X===-1)throw new N1($);const J=Y[X];return b0(J,Y)}},aZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((X,J)=>b0($.items[J],Y))},eZ=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return},$W=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return b0($.anyOf[0],Y)},YW=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},XW=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return{}},JW=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else return},ZW=function($,Y){if(n.HasPropertyKey($,"default"))return $.default;else throw new Error("ValueCreate: User defined types must specify a default value")},b0=function($,Y){const X=n.IsString($.$id)?[...Y,$]:Y,J=$;switch(J[$$.Kind]){case"Any":return bZ(J,X);case"Array":return GZ(J,X);case"AsyncIterator":return EZ(J,X);case"BigInt":return xZ(J,X);case"Boolean":return VZ(J,X);case"Constructor":return kZ(J,X);case"Date":return gZ(J,X);case"Function":return fZ(J,X);case"Integer":return TZ(J,X);case"Intersect":return dZ(J,X);case"Iterator":return yZ(J,X);case"Literal":return vZ(J,X);case"Never":return iZ(J,X);case"Not":return pZ(J,X);case"Null":return mZ(J,X);case"Number":return oZ(J,X);case"Object":return nZ(J,X);case"Promise":return uZ(J,X);case"Record":return cZ(J,X);case"Ref":return hZ(J,X);case"String":return lZ(J,X);case"Symbol":return tZ(J,X);case"TemplateLiteral":return sZ(J,X);case"This":return rZ(J,X);case"Tuple":return aZ(J,X);case"Undefined":return eZ(J,X);case"Union":return $W(J,X);case"Uint8Array":return YW(J,X);case"Unknown":return XW(J,X);case"Void":return JW(J,X);default:if(!$$.TypeRegistry.Has(J[$$.Kind]))throw new Q8(J);return ZW(J,X)}},WW=function(...$){return V4=0,$.length===2?b0($[0],$[1]):b0($[0],[])};Object.defineProperty(k4,"__esModule",{value:!0});k4.Create=k4.ValueCreateRecursiveInstantiationError=k4.ValueCreateDereferenceError=k4.ValueCreateTempateLiteralTypeError=k4.ValueCreateIntersectTypeError=k4.ValueCreateNotTypeError=k4.ValueCreateNeverTypeError=k4.ValueCreateUnknownTypeError=void 0;var $$=f0(),RZ=p$(),n=G0();class Q8 extends Error{constructor($){super("ValueCreate: Unknown type");this.schema=$}}k4.ValueCreateUnknownTypeError=Q8;class z8 extends Error{constructor($){super("ValueCreate: Never types cannot be created");this.schema=$}}k4.ValueCreateNeverTypeError=z8;class H8 extends Error{constructor($){super("ValueCreate: Not types must have a default value");this.schema=$}}k4.ValueCreateNotTypeError=H8;class q8 extends Error{constructor($){super("ValueCreate: Intersect produced invalid value. Consider using a default value.");this.schema=$}}k4.ValueCreateIntersectTypeError=q8;class M8 extends Error{constructor($){super("ValueCreate: Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=$}}k4.ValueCreateTempateLiteralTypeError=M8;class N1 extends Error{constructor($){super(`ValueCreate: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}k4.ValueCreateDereferenceError=N1;class F8 extends Error{constructor($,Y){super("ValueCreate: Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=$,this.recursiveMaxDepth=Y}}k4.ValueCreateRecursiveInstantiationError=F8;var x4=512,V4=0;k4.Create=WW});var i4=e((y4)=>{var BW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},NW=function($,Y,X){if(h.Check($,Y,X))return P0.Clone(X);const J=Y$.IsArray(X)?P0.Clone(X):t.Create($,Y),Z=Y$.IsNumber($.minItems)&&J.length<$.minItems?[...J,...Array.from({length:$.minItems-J.length},()=>null)]:J,q=(Y$.IsNumber($.maxItems)&&Z.length>$.maxItems?Z.slice(0,$.maxItems):Z).map((A)=>d0($.items,Y,A));if($.uniqueItems!==!0)return q;const M=[...new Set(q)];if(!h.Check($,Y,M))throw new N8($,M);return M},AW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},wW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},DW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},PW=function($,Y,X){if(h.Check($,Y,X))return t.Create($,Y);const J=new Set($.returns.required||[]),Z=function(){};for(let[W,q]of Object.entries($.returns.properties)){if(!J.has(W)&&X.prototype[W]===void 0)continue;Z.prototype[W]=d0(q,Y,X.prototype[W])}return Z},KW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},SW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},LW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},CW=function($,Y,X){const J=t.Create($,Y),Z=Y$.IsPlainObject(J)&&Y$.IsPlainObject(X)?{...J,...X}:X;return h.Check($,Y,Z)?Z:t.Create($,Y)},jW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},OW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},IW=function($,Y,X){throw new A8($)},_W=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},RW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},bW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},GW=function($,Y,X){if(h.Check($,Y,X))return X;if(X===null||typeof X!=="object")return t.Create($,Y);const J=new Set($.required||[]),Z={};for(let[W,q]of Object.entries($.properties)){if(!J.has(W)&&X[W]===void 0)continue;Z[W]=d0(q,Y,X[W])}if(typeof $.additionalProperties==="object"){const W=Object.getOwnPropertyNames($.properties);for(let q of Object.getOwnPropertyNames(X)){if(W.includes(q))continue;Z[q]=d0($.additionalProperties,Y,X[q])}}return Z},EW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},xW=function($,Y,X){if(h.Check($,Y,X))return P0.Clone(X);if(X===null||typeof X!=="object"||Array.isArray(X)||X instanceof Date)return t.Create($,Y);const J=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[J],W={};for(let[q,M]of Object.entries(X))W[q]=d0(Z,Y,M);return W},VW=function($,Y,X){const J=Y.findIndex((W)=>W.$id===$.$ref);if(J===-1)throw new A1($);const Z=Y[J];return d0(Z,Y,X)},kW=function($,Y,X){return h.Check($,Y,X)?X:t.Create($,Y)},gW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},fW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},TW=function($,Y,X){const J=Y.findIndex((W)=>W.$id===$.$ref);if(J===-1)throw new A1($);const Z=Y[J];return d0(Z,Y,X)},dW=function($,Y,X){if(h.Check($,Y,X))return P0.Clone(X);if(!Y$.IsArray(X))return t.Create($,Y);if($.items===void 0)return[];return $.items.map((J,Z)=>d0(J,Y,X[Z]))},yW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},vW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):B8.Create($,Y,X)},iW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},pW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},mW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},oW=function($,Y,X){return h.Check($,Y,X)?P0.Clone(X):t.Create($,Y)},d0=function($,Y,X){const J=Y$.IsString($.$id)?[...Y,$]:Y,Z=$;switch($[m$.Kind]){case"Any":return BW(Z,J,X);case"Array":return NW(Z,J,X);case"AsyncIterator":return AW(Z,J,X);case"BigInt":return wW(Z,J,X);case"Boolean":return DW(Z,J,X);case"Constructor":return PW(Z,J,X);case"Date":return KW(Z,J,X);case"Function":return SW(Z,J,X);case"Integer":return LW(Z,J,X);case"Intersect":return CW(Z,J,X);case"Iterator":return jW(Z,J,X);case"Literal":return OW(Z,J,X);case"Never":return IW(Z,J,X);case"Not":return _W(Z,J,X);case"Null":return RW(Z,J,X);case"Number":return bW(Z,J,X);case"Object":return GW(Z,J,X);case"Promise":return EW(Z,J,X);case"Record":return xW(Z,J,X);case"Ref":return VW(Z,J,X);case"String":return kW(Z,J,X);case"Symbol":return gW(Z,J,X);case"TemplateLiteral":return fW(Z,J,X);case"This":return TW(Z,J,X);case"Tuple":return dW(Z,J,X);case"Undefined":return yW(Z,J,X);case"Union":return vW(Z,J,X);case"Uint8Array":return iW(Z,J,X);case"Unknown":return pW(Z,J,X);case"Void":return mW(Z,J,X);default:if(!m$.TypeRegistry.Has(Z[m$.Kind]))throw new w8(Z);return oW(Z,J,X)}},d4=function(...$){return $.length===3?d0($[0],$[1],$[2]):d0($[0],[],$[1])};Object.defineProperty(y4,"__esModule",{value:!0});y4.Cast=y4.ValueCastDereferenceError=y4.ValueCastUnknownTypeError=y4.ValueCastRecursiveTypeError=y4.ValueCastNeverTypeError=y4.ValueCastArrayUniqueItemsTypeError=y4.ValueCastReferenceTypeError=void 0;var m$=f0(),t=U8(),h=p$(),P0=E$(),Y$=G0();class f4 extends Error{constructor($){super(`ValueCast: Cannot locate referenced schema with \$id '${$.$ref}'`);this.schema=$}}y4.ValueCastReferenceTypeError=f4;class N8 extends Error{constructor($,Y){super("ValueCast: Array cast produced invalid data due to uniqueItems constraint");this.schema=$,this.value=Y}}y4.ValueCastArrayUniqueItemsTypeError=N8;class A8 extends Error{constructor($){super("ValueCast: Never types cannot be cast");this.schema=$}}y4.ValueCastNeverTypeError=A8;class T4 extends Error{constructor($){super("ValueCast.Recursive: Cannot cast recursive schemas");this.schema=$}}y4.ValueCastRecursiveTypeError=T4;class w8 extends Error{constructor($){super("ValueCast: Unknown type");this.schema=$}}y4.ValueCastUnknownTypeError=w8;class A1 extends Error{constructor($){super(`ValueCast: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}y4.ValueCastDereferenceError=A1;var B8;(function($){function Y(Z,W,q){if(Z[m$.Kind]==="Object"&&typeof q==="object"&&!Y$.IsNull(q)){const M=Z,A=Object.getOwnPropertyNames(q),D=Object.entries(M.properties),[N,K]=[1/D.length,D.length];return D.reduce((w,[B,C])=>{const S=C[m$.Kind]==="Literal"&&C.const===q[B]?K:0,I=h.Check(C,W,q[B])?N:0,R=A.includes(B)?N:0;return w+(S+I+R)},0)}else return h.Check(Z,W,q)?1:0}function X(Z,W,q){let[M,A]=[Z.anyOf[0],0];for(let D of Z.anyOf){const N=Y(D,W,q);if(N>A)M=D,A=N}return M}function J(Z,W,q){if("default"in Z)return Z.default;else{const M=X(Z,W,q);return d4(M,W,q)}}$.Create=J})(B8||(B8={}));y4.Cast=d4});var h4=e((u4)=>{var D1=function($){return r.IsString($)&&!isNaN($)&&!isNaN(parseFloat($))},rW=function($){return r.IsBigInt($)||r.IsBoolean($)||r.IsNumber($)},o$=function($){return $===!0||r.IsNumber($)&&$===1||r.IsBigInt($)&&$===BigInt("1")||r.IsString($)&&($.toLowerCase()==="true"||$==="1")},n$=function($){return $===!1||r.IsNumber($)&&$===0||r.IsBigInt($)&&$===BigInt("0")||r.IsString($)&&($.toLowerCase()==="false"||$==="0")},aW=function($){return r.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},eW=function($){return r.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},$Q=function($){return r.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},YQ=function($){return r.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},XQ=function($){return r.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},JQ=function($,Y){const X=o4($);return X===Y?X:$},ZQ=function($,Y){const X=n4($);return X===Y?X:$},WQ=function($,Y){const X=m4($);return X===Y?X:$},QQ=function($,Y){if(typeof $.const==="string")return JQ(Y,$.const);else if(typeof $.const==="number")return ZQ(Y,$.const);else if(typeof $.const==="boolean")return WQ(Y,$.const);else return p4.Clone(Y)},m4=function($){return o$($)?!0:n$($)?!1:$},zQ=function($){return D1($)?BigInt(parseInt($)):r.IsNumber($)?BigInt($|0):n$($)?0:o$($)?1:$},o4=function($){return rW($)?$.toString():r.IsSymbol($)&&$.description!==void 0?$.description.toString():$},n4=function($){return D1($)?parseFloat($):o$($)?1:n$($)?0:$},HQ=function($){return D1($)?parseInt($):r.IsNumber($)?$|0:o$($)?1:n$($)?0:$},qQ=function($){return r.IsString($)&&$.toLowerCase()==="null"?null:$},MQ=function($){return r.IsString($)&&$==="undefined"?void 0:$},FQ=function($){return r.IsDate($)?$:r.IsNumber($)?new Date($):o$($)?new Date(1):n$($)?new Date(0):D1($)?new Date(parseInt($)):eW($)?new Date(`1970-01-01T${$}.000Z`):aW($)?new Date(`1970-01-01T${$}`):YQ($)?new Date(`${$}.000Z`):$Q($)?new Date($):XQ($)?new Date(`${$}T00:00:00.000Z`):$},UQ=function($,Y,X){return X},BQ=function($,Y,X){if(r.IsArray(X))return X.map((J)=>h0($.items,Y,J));return X},NQ=function($,Y,X){return X},AQ=function($,Y,X){return zQ(X)},wQ=function($,Y,X){return m4(X)},DQ=function($,Y,X){return p4.Clone(X)},PQ=function($,Y,X){return FQ(X)},KQ=function($,Y,X){return X},SQ=function($,Y,X){return HQ(X)},LQ=function($,Y,X){return X},CQ=function($,Y,X){return X},jQ=function($,Y,X){return QQ($,X)},OQ=function($,Y,X){return X},IQ=function($,Y,X){return qQ(X)},_Q=function($,Y,X){return n4(X)},RQ=function($,Y,X){if(r.IsObject(X))return Object.getOwnPropertyNames($.properties).reduce((J,Z)=>{return X[Z]!==void 0?{...J,[Z]:h0($.properties[Z],Y,X[Z])}:{...J}},X);return X},bQ=function($,Y,X){return X},GQ=function($,Y,X){const J=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[J],W={};for(let[q,M]of Object.entries(X))W[q]=h0(Z,Y,M);return W},EQ=function($,Y,X){const J=Y.findIndex((W)=>W.$id===$.$ref);if(J===-1)throw new w1($);const Z=Y[J];return h0(Z,Y,X)},xQ=function($,Y,X){return o4(X)},VQ=function($,Y,X){return X},kQ=function($,Y,X){return X},gQ=function($,Y,X){const J=Y.findIndex((W)=>W.$id===$.$ref);if(J===-1)throw new w1($);const Z=Y[J];return h0(Z,Y,X)},fQ=function($,Y,X){if(r.IsArray(X)&&!r.IsUndefined($.items))return X.map((J,Z)=>{return Z<$.items.length?h0($.items[Z],Y,J):J});return X},TQ=function($,Y,X){return MQ(X)},dQ=function($,Y,X){for(let J of $.anyOf){const Z=h0(J,Y,X);if(sW.Check(J,Y,Z))return Z}return X},yQ=function($,Y,X){return X},vQ=function($,Y,X){return X},iQ=function($,Y,X){return X},pQ=function($,Y,X){return X},h0=function($,Y,X){const J=r.IsString($.$id)?[...Y,$]:Y,Z=$;switch($[D8.Kind]){case"Any":return UQ(Z,J,X);case"Array":return BQ(Z,J,X);case"AsyncIterator":return NQ(Z,J,X);case"BigInt":return AQ(Z,J,X);case"Boolean":return wQ(Z,J,X);case"Constructor":return DQ(Z,J,X);case"Date":return PQ(Z,J,X);case"Function":return KQ(Z,J,X);case"Integer":return SQ(Z,J,X);case"Intersect":return LQ(Z,J,X);case"Iterator":return CQ(Z,J,X);case"Literal":return jQ(Z,J,X);case"Never":return OQ(Z,J,X);case"Null":return IQ(Z,J,X);case"Number":return _Q(Z,J,X);case"Object":return RQ(Z,J,X);case"Promise":return bQ(Z,J,X);case"Record":return GQ(Z,J,X);case"Ref":return EQ(Z,J,X);case"String":return xQ(Z,J,X);case"Symbol":return VQ(Z,J,X);case"TemplateLiteral":return kQ(Z,J,X);case"This":return gQ(Z,J,X);case"Tuple":return fQ(Z,J,X);case"Undefined":return TQ(Z,J,X);case"Union":return dQ(Z,J,X);case"Uint8Array":return yQ(Z,J,X);case"Unknown":return vQ(Z,J,X);case"Void":return iQ(Z,J,X);default:if(!D8.TypeRegistry.Has(Z[D8.Kind]))throw new P8(Z);return pQ(Z,J,X)}},mQ=function(...$){return $.length===3?h0($[0],$[1],$[2]):h0($[0],[],$[1])};Object.defineProperty(u4,"__esModule",{value:!0});u4.Convert=u4.ValueConvertDereferenceError=u4.ValueConvertUnknownTypeError=void 0;var D8=f0(),p4=E$(),sW=p$(),r=G0();class P8 extends Error{constructor($){super("ValueConvert: Unknown type");this.schema=$}}u4.ValueConvertUnknownTypeError=P8;class w1 extends Error{constructor($){super(`ValueConvert: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}u4.ValueConvertDereferenceError=w1;u4.Convert=mQ});var J6=e((Y6)=>{Object.defineProperty(Y6,"__esModule",{value:!0});Y6.Value=void 0;var l4=v$(),uQ=I4(),cQ=y$(),hQ=b4(),t4=i4(),lQ=E$(),s4=h4(),r4=U8(),a4=p$(),e4=$8(),$6;(function($){function Y(...w){return t4.Cast.apply(t4,w)}$.Cast=Y;function X(...w){return r4.Create.apply(r4,w)}$.Create=X;function J(...w){return a4.Check.apply(a4,w)}$.Check=J;function Z(...w){return s4.Convert.apply(s4,w)}$.Convert=Z;function W(w){return lQ.Clone(w)}$.Clone=W;function q(...w){return l4.Errors.apply(l4,w)}$.Errors=q;function M(w,B){return hQ.Equal(w,B)}$.Equal=M;function A(w,B){return e4.Diff(w,B)}$.Diff=A;function D(w){return cQ.Hash(w)}$.Hash=D;function N(w,B){return e4.Patch(w,B)}$.Patch=N;function K(w,B){uQ.Mutate(w,B)}$.Mutate=K})($6||(Y6.Value=$6={}))});var K8=e((y0)=>{Object.defineProperty(y0,"__esModule",{value:!0});y0.Value=y0.ValuePointer=y0.Delete=y0.Update=y0.Insert=y0.Edit=y0.ValueErrorIterator=y0.ValueErrorType=void 0;var Z6=v$();Object.defineProperty(y0,"ValueErrorType",{enumerable:!0,get:function(){return Z6.ValueErrorType}});Object.defineProperty(y0,"ValueErrorIterator",{enumerable:!0,get:function(){return Z6.ValueErrorIterator}});var P1=$8();Object.defineProperty(y0,"Edit",{enumerable:!0,get:function(){return P1.Edit}});Object.defineProperty(y0,"Insert",{enumerable:!0,get:function(){return P1.Insert}});Object.defineProperty(y0,"Update",{enumerable:!0,get:function(){return P1.Update}});Object.defineProperty(y0,"Delete",{enumerable:!0,get:function(){return P1.Delete}});var tQ=z1();Object.defineProperty(y0,"ValuePointer",{enumerable:!0,get:function(){return tQ.ValuePointer}});var sQ=J6();Object.defineProperty(y0,"Value",{enumerable:!0,get:function(){return sQ.Value}})});var H6=e((Q6)=>{Object.defineProperty(Q6,"__esModule",{value:!0});Q6.TypeCompiler=Q6.TypeCompilerTypeGuardError=Q6.TypeCompilerDereferenceError=Q6.TypeCompilerUnknownTypeError=Q6.TypeCheck=void 0;var u$=d$(),Z0=f0(),aQ=v$(),eQ=y$(),p=G0();class L8{constructor($,Y,X,J){this.schema=$,this.references=Y,this.checkFunc=X,this.code=J}Code(){return this.code}Errors($){return aQ.Errors(this.schema,this.references,$)}Check($){return this.checkFunc($)}}Q6.TypeCheck=L8;var l0;(function($){function Y(W){return W===36}$.DollarSign=Y;function X(W){return W===95}$.IsUnderscore=X;function J(W){return W>=65&&W<=90||W>=97&&W<=122}$.IsAlpha=J;function Z(W){return W>=48&&W<=57}$.IsNumeric=Z})(l0||(l0={}));var K1;(function($){function Y(W){if(W.length===0)return!1;return l0.IsNumeric(W.charCodeAt(0))}function X(W){if(Y(W))return!1;for(let q=0;q<W.length;q++){const M=W.charCodeAt(q);if(!(l0.IsAlpha(M)||l0.IsNumeric(M)||l0.DollarSign(M)||l0.IsUnderscore(M)))return!1}return!0}function J(W){return W.replace(/'/g,"\\'")}function Z(W,q){return X(q)?`${W}.${q}`:`${W}['${J(q)}']`}$.Encode=Z})(K1||(K1={}));var S8;(function($){function Y(X){const J=[];for(let Z=0;Z<X.length;Z++){const W=X.charCodeAt(Z);if(l0.IsNumeric(W)||l0.IsAlpha(W))J.push(X.charAt(Z));else J.push(`_${W}_`)}return J.join("").replace(/__/g,"_")}$.Encode=Y})(S8||(S8={}));class C8 extends Error{constructor($){super("TypeCompiler: Unknown type");this.schema=$}}Q6.TypeCompilerUnknownTypeError=C8;class j8 extends Error{constructor($){super(`TypeCompiler: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}Q6.TypeCompilerDereferenceError=j8;class S1 extends Error{constructor($){super("TypeCompiler: Preflight validation check failed to guard for the given schema");this.schema=$}}Q6.TypeCompilerTypeGuardError=S1;var W6;(function($){function Y(U){return U[Z0.Kind]==="Any"||U[Z0.Kind]==="Unknown"}function X(U,L,Q){return u$.TypeSystem.ExactOptionalPropertyTypes?`('${L}' in ${U} ? ${Q} : true)`:`(${K1.Encode(U,L)} !== undefined ? ${Q} : true)`}function J(U){return!u$.TypeSystem.AllowArrayObjects?`(typeof ${U} === 'object' && ${U} !== null && !Array.isArray(${U}))`:`(typeof ${U} === 'object' && ${U} !== null)`}function Z(U){return!u$.TypeSystem.AllowArrayObjects?`(typeof ${U} === 'object' && ${U} !== null && !Array.isArray(${U}) && !(${U} instanceof Date) && !(${U} instanceof Uint8Array))`:`(typeof ${U} === 'object' && ${U} !== null && !(${U} instanceof Date) && !(${U} instanceof Uint8Array))`}function W(U){return!u$.TypeSystem.AllowNaN?`(typeof ${U} === 'number' && Number.isFinite(${U}))`:`typeof ${U} === 'number'`}function q(U){return u$.TypeSystem.AllowVoidNull?`(${U} === undefined || ${U} === null)`:`${U} === undefined`}function*M(U,L,Q){yield"true"}function*A(U,L,Q){yield`Array.isArray(${Q})`;const[b,O]=[k0("value","any"),k0("acc","number")];if(p.IsNumber(U.minItems))yield`${Q}.length >= ${U.minItems}`;if(p.IsNumber(U.maxItems))yield`${Q}.length <= ${U.maxItems}`;const V=Q0(U.items,L,"value");if(yield`${Q}.every((${b}) => ${V})`,Z0.TypeGuard.TSchema(U.contains)||p.IsNumber(U.minContains)||p.IsNumber(U.maxContains)){const s=Z0.TypeGuard.TSchema(U.contains)?U.contains:Z0.Type.Never(),B0=Q0(s,L,"value"),j0=p.IsNumber(U.minContains)?[`(count >= ${U.minContains})`]:[],O0=p.IsNumber(U.maxContains)?[`(count <= ${U.maxContains})`]:[],I0=`const count = ${Q}.reduce((${O}, ${b}) => ${B0} ? acc + 1 : acc, 0)`,P$=["(count > 0)",...j0,...O0].join(" && ");yield`((${b}) => { ${I0}; return ${P$}})(${Q})`}if(U.uniqueItems===!0)yield`((${b}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${Q})`}function*D(U,L,Q){yield`(typeof value === 'object' && Symbol.asyncIterator in ${Q})`}function*N(U,L,Q){if(yield`(typeof ${Q} === 'bigint')`,p.IsBigInt(U.multipleOf))yield`(${Q} % BigInt(${U.multipleOf})) === 0`;if(p.IsBigInt(U.exclusiveMinimum))yield`${Q} > BigInt(${U.exclusiveMinimum})`;if(p.IsBigInt(U.exclusiveMaximum))yield`${Q} < BigInt(${U.exclusiveMaximum})`;if(p.IsBigInt(U.minimum))yield`${Q} >= BigInt(${U.minimum})`;if(p.IsBigInt(U.maximum))yield`${Q} <= BigInt(${U.maximum})`}function*K(U,L,Q){yield`(typeof ${Q} === 'boolean')`}function*w(U,L,Q){yield*C0(U.returns,L,`${Q}.prototype`)}function*B(U,L,Q){if(yield`(${Q} instanceof Date) && Number.isFinite(${Q}.getTime())`,p.IsNumber(U.exclusiveMinimumTimestamp))yield`${Q}.getTime() > ${U.exclusiveMinimumTimestamp}`;if(p.IsNumber(U.exclusiveMaximumTimestamp))yield`${Q}.getTime() < ${U.exclusiveMaximumTimestamp}`;if(p.IsNumber(U.minimumTimestamp))yield`${Q}.getTime() >= ${U.minimumTimestamp}`;if(p.IsNumber(U.maximumTimestamp))yield`${Q}.getTime() <= ${U.maximumTimestamp}`}function*C(U,L,Q){yield`(typeof ${Q} === 'function')`}function*S(U,L,Q){if(yield`(typeof ${Q} === 'number' && Number.isInteger(${Q}))`,p.IsNumber(U.multipleOf))yield`(${Q} % ${U.multipleOf}) === 0`;if(p.IsNumber(U.exclusiveMinimum))yield`${Q} > ${U.exclusiveMinimum}`;if(p.IsNumber(U.exclusiveMaximum))yield`${Q} < ${U.exclusiveMaximum}`;if(p.IsNumber(U.minimum))yield`${Q} >= ${U.minimum}`;if(p.IsNumber(U.maximum))yield`${Q} <= ${U.maximum}`}function*I(U,L,Q){const b=U.allOf.map((O)=>Q0(O,L,Q)).join(" && ");if(U.unevaluatedProperties===!1){const O=p0(`${new RegExp(Z0.KeyResolver.ResolvePattern(U))};`),V=`Object.getOwnPropertyNames(${Q}).every(key => ${O}.test(key))`;yield`(${b} && ${V})`}else if(Z0.TypeGuard.TSchema(U.unevaluatedProperties)){const O=p0(`${new RegExp(Z0.KeyResolver.ResolvePattern(U))};`),V=`Object.getOwnPropertyNames(${Q}).every(key => ${O}.test(key) || ${Q0(U.unevaluatedProperties,L,`${Q}[key]`)})`;yield`(${b} && ${V})`}else yield`(${b})`}function*R(U,L,Q){yield`(typeof value === 'object' && Symbol.iterator in ${Q})`}function*g(U,L,Q){if(typeof U.const==="number"||typeof U.const==="boolean")yield`(${Q} === ${U.const})`;else yield`(${Q} === '${U.const}')`}function*i(U,L,Q){yield"false"}function*j(U,L,Q){yield`(!${Q0(U.not,L,Q)})`}function*E(U,L,Q){yield`(${Q} === null)`}function*x(U,L,Q){if(yield W(Q),p.IsNumber(U.multipleOf))yield`(${Q} % ${U.multipleOf}) === 0`;if(p.IsNumber(U.exclusiveMinimum))yield`${Q} > ${U.exclusiveMinimum}`;if(p.IsNumber(U.exclusiveMaximum))yield`${Q} < ${U.exclusiveMaximum}`;if(p.IsNumber(U.minimum))yield`${Q} >= ${U.minimum}`;if(p.IsNumber(U.maximum))yield`${Q} <= ${U.maximum}`}function*F0(U,L,Q){if(yield J(Q),p.IsNumber(U.minProperties))yield`Object.getOwnPropertyNames(${Q}).length >= ${U.minProperties}`;if(p.IsNumber(U.maxProperties))yield`Object.getOwnPropertyNames(${Q}).length <= ${U.maxProperties}`;const b=Object.getOwnPropertyNames(U.properties);for(let O of b){const V=K1.Encode(Q,O),s=U.properties[O];if(U.required&&U.required.includes(O)){if(yield*C0(s,L,V),Z0.ExtendsUndefined.Check(s)||Y(s))yield`('${O}' in ${Q})`}else{const B0=Q0(s,L,V);yield X(Q,O,B0)}}if(U.additionalProperties===!1)if(U.required&&U.required.length===b.length)yield`Object.getOwnPropertyNames(${Q}).length === ${b.length}`;else{const O=`[${b.map((V)=>`'${V}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${Q}).every(key => ${O}.includes(key))`}if(typeof U.additionalProperties==="object"){const O=Q0(U.additionalProperties,L,`${Q}[key]`),V=`[${b.map((s)=>`'${s}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${Q}).every(key => ${V}.includes(key) || ${O}))`}}function*d(U,L,Q){yield`(typeof value === 'object' && typeof ${Q}.then === 'function')`}function*a(U,L,Q){if(yield Z(Q),p.IsNumber(U.minProperties))yield`Object.getOwnPropertyNames(${Q}).length >= ${U.minProperties}`;if(p.IsNumber(U.maxProperties))yield`Object.getOwnPropertyNames(${Q}).length <= ${U.maxProperties}`;const[b,O]=Object.entries(U.patternProperties)[0],V=p0(`new RegExp(/${b}/)`),s=Q0(O,L,"value"),B0=Z0.TypeGuard.TSchema(U.additionalProperties)?Q0(U.additionalProperties,L,Q):U.additionalProperties===!1?"false":"true",j0=`(${V}.test(key) ? ${s} : ${B0})`;yield`(Object.entries(${Q}).every(([key, value]) => ${j0}))`}function*X0(U,L,Q){const b=L.findIndex((V)=>V.$id===U.$ref);if(b===-1)throw new j8(U);const O=L[b];if(J0.functions.has(U.$ref))return yield`${$0(U.$ref)}(${Q})`;yield*C0(O,L,Q)}function*D0(U,L,Q){if(yield`(typeof ${Q} === 'string')`,p.IsNumber(U.minLength))yield`${Q}.length >= ${U.minLength}`;if(p.IsNumber(U.maxLength))yield`${Q}.length <= ${U.maxLength}`;if(U.pattern!==void 0)yield`${p0(`${new RegExp(U.pattern)};`)}.test(${Q})`;if(U.format!==void 0)yield`format('${U.format}', ${Q})`}function*v(U,L,Q){yield`(typeof ${Q} === 'symbol')`}function*U0(U,L,Q){yield`(typeof ${Q} === 'string')`,yield`${p0(`${new RegExp(U.pattern)};`)}.test(${Q})`}function*S0(U,L,Q){yield`${$0(U.$ref)}(${Q})`}function*y(U,L,Q){if(yield`Array.isArray(${Q})`,U.items===void 0)return yield`${Q}.length === 0`;yield`(${Q}.length === ${U.maxItems})`;for(let b=0;b<U.items.length;b++)yield`${Q0(U.items[b],L,`${Q}[${b}]`)}`}function*L0(U,L,Q){yield`${Q} === undefined`}function*Q$(U,L,Q){yield`(${U.anyOf.map((O)=>Q0(O,L,Q)).join(" || ")})`}function*m(U,L,Q){if(yield`${Q} instanceof Uint8Array`,p.IsNumber(U.maxByteLength))yield`(${Q}.length <= ${U.maxByteLength})`;if(p.IsNumber(U.minByteLength))yield`(${Q}.length >= ${U.minByteLength})`}function*N$(U,L,Q){yield"true"}function*A$(U,L,Q){yield q(Q)}function*w$(U,L,Q){const b=J0.instances.size;J0.instances.set(b,U),yield`kind('${U[Z0.Kind]}', ${b}, ${Q})`}function*C0(U,L,Q,b=!0){const O=p.IsString(U.$id)?[...L,U]:L,V=U;if(b&&p.IsString(U.$id)){const s=$0(U.$id);if(J0.functions.has(s))return yield`${s}(${Q})`;else{const B0=r0(s,U,L,"value",!1);return J0.functions.set(s,B0),yield`${s}(${Q})`}}switch(V[Z0.Kind]){case"Any":return yield*M(V,O,Q);case"Array":return yield*A(V,O,Q);case"AsyncIterator":return yield*D(V,O,Q);case"BigInt":return yield*N(V,O,Q);case"Boolean":return yield*K(V,O,Q);case"Constructor":return yield*w(V,O,Q);case"Date":return yield*B(V,O,Q);case"Function":return yield*C(V,O,Q);case"Integer":return yield*S(V,O,Q);case"Intersect":return yield*I(V,O,Q);case"Iterator":return yield*R(V,O,Q);case"Literal":return yield*g(V,O,Q);case"Never":return yield*i(V,O,Q);case"Not":return yield*j(V,O,Q);case"Null":return yield*E(V,O,Q);case"Number":return yield*x(V,O,Q);case"Object":return yield*F0(V,O,Q);case"Promise":return yield*d(V,O,Q);case"Record":return yield*a(V,O,Q);case"Ref":return yield*X0(V,O,Q);case"String":return yield*D0(V,O,Q);case"Symbol":return yield*v(V,O,Q);case"TemplateLiteral":return yield*U0(V,O,Q);case"This":return yield*S0(V,O,Q);case"Tuple":return yield*y(V,O,Q);case"Undefined":return yield*L0(V,O,Q);case"Union":return yield*Q$(V,O,Q);case"Uint8Array":return yield*m(V,O,Q);case"Unknown":return yield*N$(V,O,Q);case"Void":return yield*A$(V,O,Q);default:if(!Z0.TypeRegistry.Has(V[Z0.Kind]))throw new C8(U);return yield*w$(V,O,Q)}}const J0={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Q0(U,L,Q,b=!0){return`(${[...C0(U,L,Q,b)].join(" && ")})`}function $0(U){return`check_${S8.Encode(U)}`}function p0(U){const L=`local_${J0.variables.size}`;return J0.variables.set(L,`const ${L} = ${U}`),L}function r0(U,L,Q,b,O=!0){const[V,s]=["\n",(I0)=>"".padStart(I0," ")],B0=k0("value","any"),j0=m0("boolean"),O0=[...C0(L,Q,b,O)].map((I0)=>`${s(4)}${I0}`).join(` &&${V}`);return`function ${U}(${B0})${j0} {${V}${s(2)}return (${V}${O0}${V}${s(2)})\n}`}function k0(U,L){const Q=J0.language==="typescript"?`: ${L}`:"";return`${U}${Q}`}function m0(U){return J0.language==="typescript"?`: ${U}`:""}function z0(U,L,Q){const b=r0("check",U,L,"value"),O=k0("value","any"),V=m0("boolean"),s=[...J0.functions.values()],B0=[...J0.variables.values()],j0=p.IsString(U.$id)?`return function check(${O})${V} {\n  return ${$0(U.$id)}(value)\n}`:`return ${b}`;return[...B0,...s,j0].join("\n")}function z$(...U){const L={language:"javascript"},[Q,b,O]=U.length===2&&p.IsArray(U[1])?[U[0],U[1],L]:U.length===2&&!p.IsArray(U[1])?[U[0],[],U[1]]:U.length===3?[U[0],U[1],U[2]]:U.length===1?[U[0],[],L]:[null,[],L];if(J0.language=O.language,J0.variables.clear(),J0.functions.clear(),J0.instances.clear(),!Z0.TypeGuard.TSchema(Q))throw new S1(Q);for(let V of b)if(!Z0.TypeGuard.TSchema(V))throw new S1(V);return z0(Q,b,O)}$.Code=z$;function D$(U,L=[]){const Q=z$(U,L,{language:"javascript"}),b=globalThis.Function("kind","format","hash",Q),O=new Map(J0.instances);function V(O0,I0,P$){if(!Z0.TypeRegistry.Has(O0)||!O.has(I0))return!1;const G1=O.get(I0);return Z0.TypeRegistry.Get(O0)(G1,P$)}function s(O0,I0){if(!Z0.FormatRegistry.Has(O0))return!1;return Z0.FormatRegistry.Get(O0)(I0)}function B0(O0){return eQ.Hash(O0)}const j0=b(V,s,B0);return new L8(U,L,j0,Q)}$.Compile=D$})(W6||(Q6.TypeCompiler=W6={}))});var q6=e((t0)=>{var Z9=t0&&t0.__createBinding||(Object.create?function($,Y,X,J){if(J===void 0)J=X;var Z=Object.getOwnPropertyDescriptor(Y,X);if(!Z||("get"in Z?!Y.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Y[X]}};Object.defineProperty($,J,Z)}:function($,Y,X,J){if(J===void 0)J=X;$[J]=Y[X]}),W9=t0&&t0.__exportStar||function($,Y){for(var X in $)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(Y,X))Z9(Y,$,X)};Object.defineProperty(t0,"__esModule",{value:!0});t0.ValueErrorType=void 0;var Q9=v$();Object.defineProperty(t0,"ValueErrorType",{enumerable:!0,get:function(){return Q9.ValueErrorType}});W9(H6(),t0)});var D6=e((Zz,w6)=>{var F9=function($){var Y=$.indexOf("%");if(Y===-1)return $;var X=$.length,J="",Z=0,W=0,q=Y,M=N6;while(Y>-1&&Y<X){var A=A6($[Y+1],4),D=A6($[Y+2],0),N=A|D,K=R8[N];if(M=R8[256+M+K],W=W<<6|N&R8[364+K],M===N6)J+=$.slice(Z,q),J+=W<=65535?String.fromCharCode(W):String.fromCharCode(55232+(W>>10),56320+(W&1023)),W=0,Z=Y+3,Y=q=$.indexOf("%",Z);else if(M===M9)return null;else{if(Y+=3,Y<X&&$.charCodeAt(Y)===37)continue;return null}}return J+$.slice(Z)},A6=function($,Y){var X=U9[$];return X===void 0?255:X<<Y},N6=12,M9=0,R8=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],U9={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};w6.exports=F9});var C6=e((Wz,L6)=>{var B9=function($){const Y=new S6;if(typeof $!=="string")return Y;let X=$.length,J="",Z="",W=-1,q=-1,M=!1,A=!1,D=!1,N=!1,K=!1,w=0;for(let B=0;B<X+1;B++)if(w=B!==X?$.charCodeAt(B):38,w===38){if(K=q>W,!K)q=B;if(J=$.slice(W+1,q),K||J.length>0){if(D)J=J.replace(K6," ");if(M)J=P6(J)||J;if(K){if(Z=$.slice(q+1,B),N)Z=Z.replace(K6," ");if(A)Z=P6(Z)||Z}const C=Y[J];if(C===void 0)Y[J]=Z;else if(C.pop)C.push(Z);else Y[J]=[C,Z]}Z="",W=B,q=B,M=!1,A=!1,D=!1,N=!1}else if(w===61)if(q<=W)q=B;else A=!0;else if(w===43)if(q>W)N=!0;else D=!0;else if(w===37)if(q>W)A=!0;else M=!0;return Y},P6=D6(),K6=/\+/g,S6=function(){};S6.prototype=Object.create(null);L6.exports=B9});var O6=e((Qz,j6)=>{var A9=function($){const Y=$.length;if(Y===0)return"";let X="",J=0,Z=0;$:for(;Z<Y;Z++){let W=$.charCodeAt(Z);while(W<128){if(N9[W]!==1){if(J<Z)X+=$.slice(J,Z);J=Z+1,X+=v0[W]}if(++Z===Y)break $;W=$.charCodeAt(Z)}if(J<Z)X+=$.slice(J,Z);if(W<2048){J=Z+1,X+=v0[192|W>>6]+v0[128|W&63];continue}if(W<55296||W>=57344){J=Z+1,X+=v0[224|W>>12]+v0[128|W>>6&63]+v0[128|W&63];continue}if(++Z,Z>=Y)throw new Error("URI malformed");const q=$.charCodeAt(Z)&1023;J=Z+1,W=65536+((W&1023)<<10|q),X+=v0[240|W>>18]+v0[128|W>>12&63]+v0[128|W>>6&63]+v0[128|W&63]}if(J===0)return $;if(J<Y)return X+$.slice(J);return X},v0=Array.from({length:256},($,Y)=>"%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase()),N9=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);j6.exports={encodeString:A9}});var R6=e((zz,_6)=>{var I6=function($){const Y=typeof $;if(Y==="string")return b8($);else if(Y==="bigint")return $.toString();else if(Y==="boolean")return $?"true":"false";else if(Y==="number"&&Number.isFinite($))return $<1000000000000000000000?""+$:b8(""+$);return""},w9=function($){let Y="";if($===null||typeof $!=="object")return Y;const X="&",J=Object.keys($),Z=J.length;let W=0;for(let q=0;q<Z;q++){const M=J[q],A=$[M],D=b8(M)+"=";if(q)Y+=X;if(Array.isArray(A)){W=A.length;for(let N=0;N<W;N++){if(N)Y+=X;Y+=D,Y+=I6(A[N])}}else Y+=D,Y+=I6(A)}return Y},{encodeString:b8}=O6();_6.exports=w9});var G8=e((Hz,h$)=>{var b6=C6(),G6=R6(),E6={parse:b6,stringify:G6};h$.exports=E6;h$.exports.default=E6;h$.exports.parse=b6;h$.exports.stringify=G6});var K$=($,Y)=>({part:$,store:null,inert:Y!==void 0?new Map(Y.map((X)=>[X.part.charCodeAt(0),X])):null,params:null,wildcardStore:null}),d8=($,Y)=>({...$,part:Y}),y8=($)=>({paramName:$,store:null,inert:null});class e0{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add($,Y,X){let J;if(typeof Y!="string")throw TypeError("Route path must be a string");Y===""?Y="/":Y[0]!=="/"&&(Y=`/${Y}`),this.history.push([$,Y,X]);let Z=Y[Y.length-1]==="*";Z&&(Y=Y.slice(0,-1));let W=Y.split(e0.regex.static),q=Y.match(e0.regex.params)||[];W[W.length-1]===""&&W.pop(),J=this.root[$]?this.root[$]:this.root[$]=K$("/");let M=0;for(let A=0;A<W.length;++A){let D=W[A];if(A>0){let N=q[M++].slice(1);if(J.params===null)J.params=y8(N);else if(J.params.paramName!==N)throw Error(`Cannot create route "${Y}" with parameter "${N}" because a route already exists with a different parameter name ("${J.params.paramName}") in the same location`);let K=J.params;if(K.inert===null){J=K.inert=K$(D);continue}J=K.inert}for(let N=0;;){if(N===D.length){if(N<J.part.length){let K=d8(J,J.part.slice(N));Object.assign(J,K$(D,[K]))}break}if(N===J.part.length){if(J.inert===null)J.inert=new Map;else if(J.inert.has(D.charCodeAt(N))){J=J.inert.get(D.charCodeAt(N)),D=D.slice(N),N=0;continue}let K=K$(D.slice(N));J.inert.set(D.charCodeAt(N),K),J=K;break}if(D[N]!==J.part[N]){let K=d8(J,J.part.slice(N)),w=K$(D.slice(N));Object.assign(J,K$(J.part.slice(0,N),[K,w])),J=w;break}++N}}if(M<q.length){let A=q[M],D=A.slice(1);if(J.params===null)J.params=y8(D);else if(J.params.paramName!==D)throw Error(`Cannot create route "${Y}" with parameter "${D}" because a route already exists with a different parameter name ("${J.params.paramName}") in the same location`);return J.params.store===null&&(J.params.store=X),J.params.store}return Z?(J.wildcardStore===null&&(J.wildcardStore=X),J.wildcardStore):(J.store===null&&(J.store=X),J.store)}find($,Y){let X=this.root[$];return X?E1(Y,Y.length,X,0):null}}var E1=($,Y,X,J)=>{let Z=X?.part,W=J+Z.length;if(Z.length>1){if(W>Y)return null;if(Z.length<15){for(let q=1,M=J+1;q<Z.length;++q,++M)if(Z.charCodeAt(q)!==$.charCodeAt(M))return null}else if($.substring(J,W)!==Z)return null}if(W===Y)return X.store!==null?{store:X.store,params:{}}:X.wildcardStore!==null?{store:X.wildcardStore,params:{"*":""}}:null;if(X.inert!==null){let q=X.inert.get($.charCodeAt(W));if(q!==void 0){let M=E1($,Y,q,W);if(M!==null)return M}}if(X.params!==null){let q=X.params,M=$.indexOf("/",W);if(M!==W){if(M===-1||M>=Y){if(q.store!==null){let A={};return A[q.paramName]=$.substring(W,Y),{store:q.store,params:A}}}else if(q.inert!==null){let A=E1($,Y,q.inert,M);if(A!==null)return A.params[q.paramName]=$.substring(W,M),A}}}return X.wildcardStore!==null?{store:X.wildcardStore,params:{"*":$.substring(W,Y)}}:null};var L1=a0(f0(),1),c$=a0(K8(),1),O8=a0(q6(),1);/*!
 * mergician
 * v1.1.0
 * https://jhildenbiddle.github.io/mergician/
 * (c) 2022-2023 John Hildenbiddle
 * MIT license
 */var z9=Object.getOwnPropertyNames,M6=($,Y)=>function X(){return Y||(0,$[z9($)[0]])((Y={exports:{}}).exports,Y),Y.exports},H9=M6({"src/util.cjs"($,Y){function X(...N){const K={};return N.forEach((w)=>{w.forEach((B)=>{K[B]=(B in K)?++K[B]:1})}),K}function J(...N){const K=X(...N);return Object.keys(K).filter((w)=>K[w]>1)}function Z(...N){return N.reduce((K,w)=>K.filter(Set.prototype.has,new Set(w)))}function W(...N){const K=X(...N);return Object.keys(K).filter((w)=>K[w]===1)}function q(...N){const K=X(...N);return Object.keys(K).filter((w)=>K[w]<N.length)}function M(N,K=!1){if(K){const w=[];for(let B in N)w.push(B);return w}else return Object.keys(N)}function A(N){return typeof N==="object"&&N!==null&&!Array.isArray(N)}function D(N){if(!A(N))return!1;const K=["writable","enumerable","configurable"].some((S)=>(S in N)),w=["get","set"].some((S)=>typeof N[S]==="function"),B=["get","set"].every((S)=>(S in N));let C=("value"in N)&&K||w&&(B||K);if(C){const S=["configurable","get","set","enumerable","value","writable"];C=Object.keys(N).some((I)=>!(I in S))}return C}Y.exports={countOccurrences:X,getInMultiple:J,getInAll:Z,getNotInMultiple:W,getNotInAll:q,getObjectKeys:M,isObject:A,isPropDescriptor:D}}}),q9=M6({"src/index.cjs"($,Y){var{getInMultiple:X,getInAll:J,getNotInMultiple:Z,getNotInAll:W,getObjectKeys:q,isObject:M,isPropDescriptor:A}=H9(),D={onlyKeys:[],skipKeys:[],onlyCommonKeys:!1,onlyUniversalKeys:!1,skipCommonKeys:!1,skipUniversalKeys:!1,invokeGetters:!1,skipSetters:!1,appendArrays:!1,prependArrays:!1,dedupArrays:!1,sortArrays:!1,hoistProto:!1,filter:Function.prototype,beforeEach:Function.prototype,afterEach:Function.prototype,onCircular:Function.prototype};function N(...K){const w=arguments.length===1?arguments[0]:{},B={...D,...w},C=new Map,S=new Map,I=typeof B.sortArrays==="function"?B.sortArrays:void 0,R=new WeakMap;let g=0;function i(E){return q(E,B.hoistProto)}function j(...E){let x;if(E.length>1){if(B.onlyCommonKeys)x=X(...E.map((d)=>i(d)));else if(B.onlyUniversalKeys)x=J(...E.map((d)=>i(d)));else if(B.skipCommonKeys)x=Z(...E.map((d)=>i(d)));else if(B.skipUniversalKeys)x=W(...E.map((d)=>i(d)))}if(!x&&B.onlyKeys.length)x=B.onlyKeys;if(x&&x!==B.onlyKeys&&B.onlyKeys.length)x=x.filter((d)=>B.onlyKeys.includes(d));const F0=E.reduce((d,a)=>{R.set(a,d);let X0=x||i(a);if(B.skipKeys.length)X0=X0.filter((D0)=>B.skipKeys.indexOf(D0)===-1);for(let D0=0;D0<X0.length;D0++){const v=X0[D0],U0=d[v];let S0=!1,y;if((v in a)===!1)continue;try{y=a[v]}catch(m){console.error(m);continue}const L0=Object.getOwnPropertyDescriptor(a,v);if(L0&&typeof L0.set==="function"&&typeof L0.get!=="function"){if(!B.skipSetters)L0.configurable=!0,Object.defineProperty(d,v,L0);continue}if(B.filter!==D.filter){const m=B.filter({depth:g,key:v,srcObj:a,srcVal:y,targetObj:d,targetVal:U0});if(m!==void 0&&!m)continue}if(B.beforeEach!==D.beforeEach){const m=B.beforeEach({depth:g,key:v,srcObj:a,srcVal:y,targetObj:d,targetVal:U0});if(m!==void 0)S0=!0,y=m}if(typeof y==="object"&&y!==null){if(R.has(a[v])){const m=B.onCircular({depth:g,key:v,srcObj:a,srcVal:a[v],targetObj:d,targetVal:U0});if(m===void 0){y=R.get(a[v]),d[v]=y;continue}S0=!0,y=m}}if(Array.isArray(y)){if(y=[...y],Array.isArray(U0)){if(B.appendArrays)y=[...U0,...y];else if(B.prependArrays)y=[...y,...U0]}if(B.dedupArrays)if(B.afterEach!==D.afterEach)y=[...new Set(y)];else{const m=C.get(d);if(m&&!m.includes(v))m.push(v);else C.set(d,[v])}if(B.sortArrays)if(B.afterEach!==D.afterEach)y=y.sort(I);else{const m=S.get(d);if(m&&!m.includes(v))m.push(v);else S.set(d,[v])}}else if(M(y)&&(!S0||!A(y))){if(g++,M(U0))y=j(U0,y);else y=j(y);g--}if(B.afterEach!==D.afterEach){const m=B.afterEach({depth:g,key:v,mergeVal:y,srcObj:a,targetObj:d});if(m!==void 0)S0=!0,y=m}if(S0)if(A(y)){if(y.configurable=!0,y.enumerable=!("enumerable"in y)?!0:y.enumerable,("value"in y)&&!("writable"in y))y.writable=!0;Object.defineProperty(d,v,y)}else d[v]=y;else{const m=Object.getOwnPropertyDescriptor(a,v);if(m&&typeof m.get==="function"&&!B.invokeGetters){if(B.skipSetters)m.set=void 0;m.configurable=!0,Object.defineProperty(d,v,m)}else d[v]=y}}return d},{});for(let[d,a]of C.entries())for(let X0 of a)d[X0]=[...new Set(d[X0])];for(let[d,a]of S.entries())for(let X0 of a)d[X0].sort(I);return F0}if(arguments.length===1)return function(...E){if(arguments.length===1)return N({...B,...E[0]});else return j(...E)};else return j(...arguments)}Y.exports=N}}),F6=q9();var X$=F6({appendArrays:!0}),w0=($,Y)=>{const X=[...Array.isArray($)?$:[$]],J=[];for(let Z of X)if(Z.$elysiaChecksum)J.push(Z.$elysiaChecksum);for(let Z of Array.isArray(Y)?Y:[Y])if(!J.includes(Z?.$elysiaChecksum))X.push(Z);return X},F$=($,Y)=>{return{body:Y?.body??$?.body,headers:Y?.headers??$?.headers,params:Y?.params??$?.params,query:Y?.query??$?.query,response:Y?.response??$?.response,type:$?.type||Y?.type,detail:X$(Y?.detail??{},$?.detail??{}),parse:w0($.parse??[],Y?.parse??[]),transform:w0($.transform??[],Y?.transform??[]),beforeHandle:w0($.beforeHandle??[],Y?.beforeHandle??[]),afterHandle:w0($.afterHandle??[],Y?.afterHandle??[]),onResponse:w0($.onResponse??[],Y?.onResponse??[]),error:w0($.error??[],Y?.error??[])}},V0=($,{models:Y={},additionalProperties:X=!1,dynamic:J=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in Y))return;const Z=typeof $==="string"?Y[$]:$;if(Z.type==="object"&&("additionalProperties"in Z)===!1)Z.additionalProperties=X;if(J)return{schema:Z,references:"",checkFunc:()=>{},code:"",Check:(W)=>c$.Value.Check(Z,W),Errors:(W)=>c$.Value.Errors(Z,W),Code:()=>""};return O8.TypeCompiler.Compile(Z)},I8=($,{models:Y={},additionalProperties:X=!1,dynamic:J=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in Y))return;const Z=typeof $==="string"?Y[$]:$,W=(M)=>{if(J)return{schema:M,references:"",checkFunc:()=>{},code:"",Check:(A)=>c$.Value.Check(M,A),Errors:(A)=>c$.Value.Errors(M,A),Code:()=>""};return O8.TypeCompiler.Compile(M)};if(L1.Kind in Z)return{200:W(Z)};const q={};return Object.keys(Z).forEach((M)=>{const A=Z[M];if(typeof A==="string"){if(A in Y){const D=Y[A];D.type==="object"&&("additionalProperties"in D),q[+M]=(L1.Kind in D)?W(D):D}return}if(A.type==="object"&&("additionalProperties"in A)===!1)A.additionalProperties=X;q[+M]=(L1.Kind in A)?W(A):A}),q},U6=($)=>{let Y=9;for(let X=0;X<$.length;)Y=Math.imul(Y^$.charCodeAt(X++),387420489);return Y=Y^Y>>>9},C1=($,Y,X)=>{const J=(Z)=>{if(X)Z.$elysiaChecksum=X;return Z};return{start:w0($.start,("start"in Y?Y.start:[]).map(J)),request:w0($.request,("request"in Y?Y.request:[]).map(J)),parse:w0($.parse,Y?.parse??[]).map(J),transform:w0($.transform,(Y?.transform??[]).map(J)),beforeHandle:w0($.beforeHandle,(Y?.beforeHandle??[]).map(J)),afterHandle:w0($.afterHandle,(Y?.afterHandle??[]).map(J)),onResponse:w0($.onResponse,(Y?.onResponse??[]).map(J)),error:w0($.error,(Y?.error??[]).map(J)),stop:w0($.stop,("stop"in Y?Y.stop:[]).map(J))}};var B6=($,Y=!0)=>{if(!$)return $;if(typeof $==="function"){if(Y)$.$elysiaHookType="global";else $.$elysiaHookType=void 0;return $}return $.map((X)=>{if(Y)X.$elysiaHookType="global";else X.$elysiaHookType=void 0;return X})},k$=($)=>{if(!$)return $;if(typeof $==="function")return $.$elysiaHookType==="global"?$:void 0;return $.filter((Y)=>Y.$elysiaHookType==="global")},_8=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:k$($?.parse),transform:k$($?.transform),beforeHandle:k$($?.beforeHandle),afterHandle:k$($?.afterHandle),onResponse:k$($?.onResponse),error:k$($?.error)}};var T6=a0(G8(),1);var x6="toJSON"in new Headers,V6=($)=>{for(let Y in $)return!0;return!1},k6=($,Y)=>{$.delete("Set-Cookie");for(let X=0;X<Y.length;X++){const J=Y[X].indexOf("=");$.append("Set-Cookie",`${Y[X].slice(0,J)}=${Y[X].slice(J+1)}`)}return $},i0=($,Y)=>{if(V6(Y.headers)||Y.status!==200||Y.redirect){if(Y.redirect){if(Y.headers.Location=Y.redirect,Y.status===200)Y.status=302}if(Y.headers["Set-Cookie"]&&Array.isArray(Y.headers["Set-Cookie"]))Y.headers=k6(new Headers(Y.headers),Y.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,Y);case"Object":case"Array":return Response.json($,Y);case void 0:if(!$)return;return Response.json($,Y);case"Response":const X=Object.assign({},Y.headers);if(x6)Y.headers=$.headers.toJSON();else for(let[Z,W]of $.headers.entries())if(!(Z in Y.headers))Y.headers[Z]=W;for(let Z in X)$.headers.append(Z,X[Z]);if($.status!==Y.status)Y.status=$.status;return $;case"Promise":return $.then((Z)=>{const W=i0(Z,Y);if(W!==void 0)return W;return});case"Error":return l$($,Y.headers);case"Function":return $();case"Number":case"Boolean":return new Response($.toString(),Y);default:if($ instanceof Response)return $;const J=JSON.stringify($);if(J.charCodeAt(0)===123){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}return new Response(J,Y)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((J)=>{const Z=i0(J,Y);if(Z!==void 0)return Z;return});case"Error":return l$($,Y.headers);case"Function":return $();case"Number":case"Boolean":return new Response($.toString());default:if($ instanceof Response)return $;const X=JSON.stringify($);if(X.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(X)}},s0=($,Y)=>{if(V6(Y.headers)||Y.status!==200||Y.redirect){if(Y.redirect){if(Y.headers.Location=Y.redirect,Y.status===200)Y.status=302}if(Y.headers["Set-Cookie"]&&Array.isArray(Y.headers["Set-Cookie"]))Y.headers=k6(new Headers(Y.headers),Y.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,{status:Y.status,headers:Y.headers});case"Object":case"Array":return Response.json($,Y);case void 0:if(!$)return new Response("",Y);return Response.json($,Y);case"Response":const X=Object.assign({},Y.headers);if(x6)Y.headers=$.headers.toJSON();else for(let[Z,W]of $.headers.entries())if(!(Z in Y.headers))Y.headers[Z]=W;for(let Z in X)$.headers.append(Z,X[Z]);return $;case"Error":return l$($,Y.headers);case"Promise":return $.then((Z)=>s0(Z,Y));case"Function":return $();case"Number":case"Boolean":return new Response($.toString(),Y);default:if($ instanceof Response)return $;const J=JSON.stringify($);if(J.charCodeAt(0)===123){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}return new Response(J,Y)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return l$($);case"Promise":return $.then((J)=>{const Z=s0(J,Y);if(Z!==void 0)return Z;return new Response("")});case"Function":return $();case"Number":case"Boolean":return new Response($.toString());default:if($ instanceof Response)return $;const X=JSON.stringify($);if(X.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(X)}},j1=($)=>{switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return l$($);case"Promise":return $.then((X)=>{const J=j1(X);if(J!==void 0)return J;return new Response("")});case"Function":return $();case"Number":case"Boolean":return new Response($.toString());default:if($ instanceof Response)return $;const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},l$=($,Y)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:500,headers:Y});var E8=a0(K8(),1),g6=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,J$=Symbol("ErrorCode"),t$=(g6?.NODE_ENV??g6?.ENV)==="production";class O1 extends Error{code="NOT_FOUND";status=500;constructor(){super("INTERNAL_SERVER_ERROR")}}class U$ extends Error{code="NOT_FOUND";status=404;constructor(){super("NOT_FOUND")}}class f6 extends Error{code="PARSE";status=400;constructor(){super("PARSE")}}class K0 extends Error{$;Y;X;code="VALIDATION";status=400;constructor($,Y,X){const J=t$?void 0:Y.Errors(X).First(),Z=J?.schema.error?typeof J.schema.error==="function"?J.schema.error($,Y,X):J.schema.error:void 0,W=t$?Z??`Invalid ${$??J?.schema.error??J?.message}`:Z??`Invalid ${$}, '${J?.path?.slice(1)||"type"}': ${J?.message}`+"\n\nExpected: "+JSON.stringify(E8.Value.Create(Y.schema),null,2)+"\n\nFound: "+JSON.stringify(X,null,2);super(W);this.type=$;this.validator=Y;this.value=X;Object.setPrototypeOf(this,K0.prototype)}get all(){return[...this.validator.Errors(this.value)]}get model(){return E8.Value.Create(this.validator.schema)}toResponse($){return new Response(this.message,{status:400,headers:$})}}var D9=new Headers,P9=new RegExp(" (\\w+) = context","g"),r$=($)=>{const Y=$.indexOf(")");if($.charCodeAt(Y+2)===61&&$.charCodeAt(Y+5)!==123)return!0;return $.includes("return")},K9=($)=>({composeValidation:(Y,X=`c.${Y}`)=>$?`c.set.status = 400; throw new ValidationError(
'${Y}',
${Y},
${X}
)`:`c.set.status = 400; return new ValidationError(
	'${Y}',
	${Y},
	${X}
).toResponse(c.set.headers)`,composeResponseValidation:(Y="r")=>$?`throw new ValidationError(
'response',
response[c.set.status],
${Y}
)`:`return new ValidationError(
'response',
response[c.set.status],
${Y}
).toResponse(c.set.headers)`}),s$=($,Y)=>{Y=Y.trimStart(),Y=Y.replaceAll(/^async /g,"");const X=Y.charCodeAt(0)===40||Y.startsWith("function")?Y.slice(Y.indexOf("(")+1,Y.indexOf(")")):Y.slice(0,Y.indexOf("=")-1);if(X==="")return!1;if(X.charCodeAt(0)===123){if(X.includes($))return!0;return!1}if(Y.match(new RegExp(`${X}(.${$}|\\["${$}"\\])`)))return!0;const J=[X];for(let W of Y.matchAll(P9))J.push(W[1]);const Z=new RegExp(`{.*?} = (${J.join("|")})`,"g");for(let[W]of Y.matchAll(Z))if(W.includes(`{ ${$}`)||W.includes(`, ${$}`))return!0;return!1},B$=($,Y,X=[],J="")=>{if(Y.type==="object"){const Z=Y.properties;for(let W in Z){const q=Z[W],M=!J?W:J+"."+W;if(q.type==="object"){B$($,q,X,M);continue}else if(q.anyOf){for(let A of q.anyOf)B$($,A,X,M);continue}if(q.elysiaMeta===$)X.push(M)}if(X.length===0)return null;return X}else if(Y?.elysiaMeta===$){if(J)X.push(J);return"root"}return null},S9=($)=>{if(!$)return;const Y=$?.schema;if(Y&&("anyOf"in Y)){let X=!1;const J=Y.anyOf[0].type;for(let Z of Y.anyOf)if(Z.type!==J){X=!0;break}if(!X)return J}},L9=/(?:return|=>) \S*\(/g,M0=($)=>{if($.constructor.name==="AsyncFunction")return!0;if($.toString().match(L9))return!0;return!1},d6=({method:$,hooks:Y,validator:X,handler:J,handleError:Z,meta:W,onRequest:q,config:M})=>{const A=M.forceErrorEncapsulation||Y.error.length>0||typeof Bun==="undefined"||Y.onResponse.length>0,{composeValidation:D,composeResponseValidation:N}=K9(A),K=Y.onResponse.length?`\n;(async () => {${Y.onResponse.map((j,E)=>`await res${E}(c)`).join(";")}})();\n`:"";let w=A?"try {\n":"";const B=X||$!=="GET"?[J,...Y.transform,...Y.beforeHandle,...Y.afterHandle].map((j)=>j.toString()):[],C=$!=="GET"&&Y.type!=="none"&&(!!X.body||!!Y.type||B.some((j)=>s$("body",j))),S=X.headers||B.some((j)=>s$("headers",j));if(S)w+=D9.toJSON?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(X.query||B.some((j)=>s$("query",j)))w+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`;const R=B.some((j)=>s$("set",j))||q.some((j)=>s$("set",j.toString())),g=C||M0(J)||Y.parse.length>0||Y.afterHandle.some(M0)||Y.beforeHandle.some(M0)||Y.transform.some(M0);if(C){const j=S9(X?.body);if(Y.type||j){if(Y.type)switch(Y.type){case"application/json":w+="c.body = await c.request.json();";break;case"text/plain":w+="c.body = await c.request.text();";break;case"application/x-www-form-urlencoded":w+="c.body = parseQuery(await c.request.text());";break;case"application/octet-stream":w+="c.body = await c.request.arrayBuffer();";break;case"multipart/form-data":w+=`c.body = {}

					const form = await c.request.formData()
					for (const key of form.keys()) {
						if (c.body[key])
							continue

						const value = form.getAll(key)
						if (value.length === 1)
							c.body[key] = value[0]
						else c.body[key] = value
					}`;break}else if(j){const E=X?.body?.schema;switch(j){case"object":if(E.elysiaMeta==="URLEncoded")w+="c.body = parseQuery(await c.request.text())";else if(X.body.Code().includes("custom('File"))w+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue
		
								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}`;else w+="c.body = JSON.parse(await c.request.text())";break;default:w+="c.body = await c.request.text()";break}}if(Y.parse.length)w+="}}"}else{if(w+="\n",w+=S?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",w+=`
            if (contentType) {
				const index = contentType.indexOf(';')
				if (index !== -1) contentType = contentType.substring(0, index)\n`,Y.parse.length){w+="let used = false\n";for(let E=0;E<Y.parse.length;E++){const x=`bo${E}`;if(E!==0)w+="if(!used) {\n";if(w+=`let ${x} = parse[${E}](c, contentType);`,w+=`if(${x} instanceof Promise) ${x} = await ${x};`,w+=`
						if(${x} !== undefined) { c.body = ${x}; used = true }\n`,E!==0)w+="}"}w+="if (!used)"}w+=`switch (contentType) {
			case 'application/json':
				c.body = await c.request.json()
				break

			case 'text/plain':
				c.body = await c.request.text()
				break

			case 'application/x-www-form-urlencoded':
				c.body = parseQuery(await c.request.text())
				break

			case 'application/octet-stream':
				c.body = await c.request.arrayBuffer();
				break

			case 'multipart/form-data':
				c.body = {}

				const form = await c.request.formData()
				for (const key of form.keys()) {
					if (c.body[key])
						continue

					const value = form.getAll(key)
					if (value.length === 1)
						c.body[key] = value[0]
					else c.body[key] = value
				}

				break
			}
		}\n`}w+="\n"}if(X.params){const j=B$("Numeric",X.params.schema);if(j){switch(typeof j){case"object":for(let E of j)w+=`if(c.params.${E}) c.params.${E} = +c.params.${E};`;break}w+="\n"}}if(X.query){const j=B$("Numeric",X.query.schema);if(j){switch(typeof j){case"object":for(let E of j)w+=`if(c.query.${E}) c.query.${E} = +c.query.${E};`;break}w+="\n"}}if(X.headers){const j=B$("Numeric",X.headers.schema);if(j){switch(typeof j){case"object":for(let E of j)w+=`c.headers.${E} = +c.headers.${E};`;break}w+="\n"}}if(X.body){const j=B$("Numeric",X.body.schema);if(j){switch(typeof j){case"string":w+="c.body = +c.body;";break;case"object":for(let x of j)w+=`c.body.${x} = +c.body.${x};`;break}w+="\n"}const E=B$("Files",X.body.schema);if(E){switch(typeof E){case"object":for(let x of E)w+=`if(!Array.isArray(c.body.${x})) c.body.${x} = [c.body.${x}];`;break}w+="\n"}}if(Y?.transform)for(let j=0;j<Y.transform.length;j++)if(Y.transform[j].$elysia==="derive")w+=M0(Y.transform[j])?`Object.assign(c, await transform[${j}](c));`:`Object.assign(c, transform[${j}](c));`;else w+=M0(Y.transform[j])?`await transform[${j}](c);`:`transform[${j}](c);`;if(X){if(X.headers)w+=`
                if (headers.Check(c.headers) === false) {
                    ${D("headers")}
				}
        `;if(X.params)w+=`if(params.Check(c.params) === false) { ${D("params")} }`;if(X.query)w+=`if(query.Check(c.query) === false) { ${D("query")} }`;if(X.body)w+=`if(body.Check(c.body) === false) { ${D("body")} }`}if(Y?.beforeHandle)for(let j=0;j<Y.beforeHandle.length;j++){const E=`be${j}`;if(!r$(Y.beforeHandle[j].toString()))w+=M0(Y.beforeHandle[j])?`await beforeHandle[${j}](c);\n`:`beforeHandle[${j}](c);\n`;else{if(w+=M0(Y.beforeHandle[j])?`let ${E} = await beforeHandle[${j}](c);\n`:`let ${E} = beforeHandle[${j}](c);\n`,w+=`if(${E} !== undefined) {\n`,Y?.afterHandle){const F0=E;for(let d=0;d<Y.afterHandle.length;d++)if(!r$(Y.afterHandle[d].toString()))w+=M0(Y.afterHandle[d])?`await afterHandle[${d}](c, ${F0});\n`:`afterHandle[${d}](c, ${F0});\n`;else{const X0=`af${d}`;w+=M0(Y.afterHandle[d])?`const ${X0} = await afterHandle[${d}](c, ${F0});\n`:`const ${X0} = afterHandle[${d}](c, ${F0});\n`,w+=`if(${X0} !== undefined) { ${F0} = ${X0} }\n`}}if(X.response)w+=`if(response[c.set.status]?.Check(${E}) === false) { 
						if(!(response instanceof Error))
							${N(E)}
					}\n`;w+=`return mapEarlyResponse(${E}, c.set)}\n`}}if(Y?.afterHandle.length){w+=M0(J)?"let r = await handler(c);\n":"let r = handler(c);\n";for(let j=0;j<Y.afterHandle.length;j++){const E=`af${j}`;if(!r$(Y.afterHandle[j].toString()))w+=M0(Y.afterHandle[j])?`await afterHandle[${j}](c, r)\n`:`afterHandle[${j}](c, r)\n`;else{if(w+=M0(Y.afterHandle[j])?`let ${E} = await afterHandle[${j}](c, r)\n`:`let ${E} = afterHandle[${j}](c, r)\n`,X.response)w+=`if(${E} !== undefined) {`,w+=`if(response[c.set.status]?.Check(${E}) === false) { 
						if(!(response instanceof Error))
						${N(E)}
					}\n`;if(w+=`${E} = mapEarlyResponse(${E}, c.set);\n`,w+=`if(${E}) return ${E};\n`,X.response)w+="}"}}if(X.response)w+=`if(response[c.set.status]?.Check(r) === false) { 
				if(!(response instanceof Error))
					${N()}
			}\n`;if(R)w+="return mapResponse(r, c.set)\n";else w+="return mapCompactResponse(r)\n"}else if(X.response)if(w+=M0(J)?"const r = await handler(c);\n":"const r = handler(c);\n",w+=`if(response[c.set.status]?.Check(r) === false) { 
				if(!(response instanceof Error))
					${N()}
			}\n`,R)w+="return mapResponse(r, c.set)\n";else w+="return mapCompactResponse(r)\n";else{const j=M0(J)?"await handler(c) ":"handler(c)";if(R)w+=`return mapResponse(${j}, c.set)\n`;else w+=`return mapCompactResponse(${j})\n`}if(A)w+=`
} catch(error) {
	

	${g?"":"return (async () => {"}
		const set = c.set

		if (!set.status || set.status < 300) set.status = 500

		${Y.error.length?`for (let i = 0; i < handleErrors.length; i++) {
				let handled = handleErrors[i]({
					request: c.request,
					error: error,
					set,
					code: error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				})
				if (handled instanceof Promise) handled = await handled

				const response = mapEarlyResponse(handled, set)
				if (response) return response
			}`:""}

		return handleError(c.request, error, set)
	${g?"":"})()"}
} finally {
	${K}
}`;return w=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		meta,
		ERROR_CODE
	} = hooks

	${Y.onResponse.length?`const ${Y.onResponse.map((j,E)=>`res${E} = onResponse[${E}]`).join(",")}`:""}

	return ${g?"async":""} function(c) {
		${W?'c["schema"] = meta["schema"]; c["defs"] = meta["defs"];':""}
		${w}
	}`,Function("hooks",w)({handler:J,hooks:Y,validator:X,handleError:Z,utils:{mapResponse:s0,mapCompactResponse:j1,mapEarlyResponse:i0,parseQuery:T6.parse},error:{NotFoundError:U$,ValidationError:K0,InternalServerError:O1},meta:W,ERROR_CODE:J$})},x8=($)=>{let Y="";for(let M of Object.keys($.decorators))Y+=`,${M}: app.decorators.${M}`;const{router:X,staticRouter:J}=$,Z=`
	const route = find(request.method, path) ${X.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${$.event.error.length?`handleError(
			request,
			notFound,
			ctx.set
		)`:`new Response(error404, {
					status: 404
				})`}

	ctx.params = route.params

	return route.store(ctx)`;let W="";for(let[M,{code:A,all:D}]of Object.entries(J.map))W+=`case '${M}':\nswitch(request.method) {\n${A}\n${D??`default: ${Z}`}}\n\n`;let q=`const {
		app,
		app: { store, router, staticRouter },
		mapEarlyResponse,
		NotFoundError
	} = data

	const notFound = new NotFoundError()

	${$.event.request.length?"const onRequest = app.event.request":""}

	${J.variables}

	const find = router.find.bind(router)
	const handleError = app.handleError.bind(this)

	${$.event.error.length?"":"const error404 = notFound.message.toString()"}

	return function(request) {
	`;if($.event.request.length){q+=`
			const ctx = {
				request,
				store,
				set: {
					headers: {},
					status: 200
				}
				${Y}
			}

			try {\n`;for(let M=0;M<$.event.request.length;M++){const A=r$($.event.request[M].toString());q+=!A?`mapEarlyResponse(onRequest[${M}](ctx), ctx.set);`:`const response = mapEarlyResponse(
					onRequest[${M}](ctx),
					ctx.set
				)
				if (response) return response\n`}q+=`} catch (error) {
			return handleError(request, error, ctx.set)
		}
		
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else q+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${Y}
		}`;return q+=`
		switch(path) {
			${W}

			default:
				${Z}
		}
	}`,$.handleError=V8($),Function("data",q)({app:$,mapEarlyResponse:i0,NotFoundError:U$})},V8=($)=>{let Y=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${$.event.error.find(M0)?"async":""} function(request, error, set) {`;for(let X=0;X<$.event.error.length;X++){const J=$.event.error[X],Z=`${M0(J)?"await ":""}onError[${X}]({
			request,
			code: error.code ?? error[ERROR_CODE] ?? 'UNKNOWN',
			error,
			set
		})`;if(r$(J.toString()))Y+=`const r${X} = ${Z}; if(r${X} !== undefined) return mapResponse(r${X}, set)\n`;else Y+=Z+"\n"}return Y+=`if(error.constructor.name === "ValidationError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`,Function("inject",Y)({app:$,mapResponse:s0,ERROR_CODE:J$})};var I1=($)=>{const Y=$.indexOf("/",10),X=$.indexOf("?",Y);if(X===-1)return $.slice(Y);return $.slice(Y,X)};class a${raw;data;isSubscribed;constructor($){this.raw=$,this.data=$.data,this.isSubscribed=$.isSubscribed}publish($,Y=void 0,X){if(typeof Y==="object")Y=JSON.stringify(Y);return this.raw.publish($,Y,X),this}publishToSelf($,Y=void 0,X){if(typeof Y==="object")Y=JSON.stringify(Y);return this.raw.publish($,Y,X),this}send($){if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}subscribe($){return this.raw.subscribe($),this}unsubscribe($){return this.raw.unsubscribe($),this}cork($){return this.raw.cork($),this}close(){return this.raw.close(),this}}var _1=($)=>(Y)=>{if(!Y.wsRouter)Y.wsRouter=new e0;const X=Y.wsRouter;if(!Y.config.serve)Y.config.serve={websocket:{...$,open(J){if(!J.data)return;const Z=I1(J?.data.request.url);if(!Z)return;const W=X.find("subscribe",Z)?.store;if(W&&W.open)W.open(new a$(J))},message(J,Z){if(!J.data)return;const W=I1(J?.data.request.url);if(!W)return;const q=X.find("subscribe",W)?.store;if(!q?.message)return;Z=Z.toString();const M=Z.charCodeAt(0);if(M===47||M===123)try{Z=JSON.parse(Z)}catch(A){}else if(!Number.isNaN(+Z))Z=+Z;for(let A=0;A<J.data.transformMessage.length;A++){const D=J.data.transformMessage[A](Z);if(D!==void 0)Z=D}if(J.data.message?.Check(Z)===!1)return void J.send(new K0("message",J.data.message,Z).cause);q.message(new a$(J),Z)},close(J,Z,W){if(!J.data)return;const q=I1(J?.data.request.url);if(!q)return;const M=X.find("subscribe",q)?.store;if(M&&M.close)M.close(new a$(J),Z,W)},drain(J){if(!J.data)return;const Z=I1(J?.data.request.url);if(!Z)return;const W=X.find("subscribe",Z)?.store;if(W&&W.drain)W.drain(new a$(J))}}};return Y.decorate("publish",Y.server?.publish).onStart((J)=>{J.decorators.publish=J.server?.publish})};var R1=a0(G8(),1),k8=($)=>async(Y)=>{const X={status:200,headers:{}};let J;if($.decorators)J=$.decorators,J.request=Y,J.set=X,J.store=$.store;else J={set:X,store:$.store,request:Y};const Z=Y.url,W=Z.indexOf("/",11),q=Z.indexOf("?",W+1),M=q===-1?Z.substring(W):Z.substring(W,q);try{for(let S=0;S<$.event.request.length;S++){const I=$.event.request[S];let R=I(J);if(R instanceof Promise)R=await R;if(R=i0(R,X),R)return R}const A=$.dynamicRouter.find(Y.method,M)??$.dynamicRouter.find("ALL",M);if(!A)throw new U$;const{handle:D,hooks:N,validator:K,content:w}=A.store;let B;if(Y.method!=="GET")if(w)switch(w){case"application/json":B=await Y.json();break;case"text/plain":B=await Y.text();break;case"application/x-www-form-urlencoded":B=R1.parse(await Y.text());break;case"application/octet-stream":B=await Y.arrayBuffer();break;case"multipart/form-data":B={};const S=await Y.formData();for(let I of S.keys()){if(B[I])continue;const R=S.getAll(I);if(R.length===1)B[I]=R[0];else B[I]=R}break}else{let S=Y.headers.get("content-type");if(S){const I=S.indexOf(";");if(I!==-1)S=S.slice(0,I);for(let R=0;R<$.event.parse.length;R++){let g=$.event.parse[R](J,S);if(g instanceof Promise)g=await g;if(g){B=g;break}}if(B===void 0)switch(S){case"application/json":B=await Y.json();break;case"text/plain":B=await Y.text();break;case"application/x-www-form-urlencoded":B=R1.parse(await Y.text());break;case"application/octet-stream":B=await Y.arrayBuffer();break;case"multipart/form-data":B={};const R=await Y.formData();for(let g of R.keys()){if(B[g])continue;const i=R.getAll(g);if(i.length===1)B[g]=i[0];else B[g]=i}break}}}J.body=B,J.params=A?.params||{},J.query=q===-1?{}:R1.parse(Z.substring(q+1));for(let S=0;S<N.transform.length;S++){const I=N.transform[S](J);if(N.transform[S].$elysia==="derive")if(I instanceof Promise)Object.assign(J,await I);else Object.assign(J,I);else if(I instanceof Promise)await I}if(K){if(K.headers){const S={};for(let I in Y.headers)S[I]=Y.headers.get(I);if(K.headers.Check(S)===!1)throw new K0("header",K.headers,S)}if(K.params?.Check(J.params)===!1)throw new K0("params",K.params,J.params);if(K.query?.Check(J.query)===!1)throw new K0("query",K.query,J.query);if(K.body?.Check(B)===!1)throw new K0("body",K.body,B)}for(let S=0;S<N.beforeHandle.length;S++){let I=N.beforeHandle[S](J);if(I instanceof Promise)I=await I;if(I!==void 0){for(let g=0;g<N.afterHandle.length;g++){let i=N.afterHandle[g](J,I);if(i instanceof Promise)i=await i;if(i)I=i}const R=i0(I,J.set);if(R)return R}}let C=D(J);if(C instanceof Promise)C=await C;if(!N.afterHandle.length){const S=K?.response?.[C.status];if(S?.Check(C)===!1)throw new K0("response",S,C)}else for(let S=0;S<N.afterHandle.length;S++){let I=N.afterHandle[S](J,C);if(I instanceof Promise)I=await I;const R=i0(I,J.set);if(R!==void 0){const g=K?.response?.[C.status];if(g?.Check(R)===!1)throw new K0("response",g,R);return R}}return s0(C,J.set)}catch(A){if(A.status)X.status=A.status;return $.handleError(Y,A,X)}finally{for(let A of $.event.onResponse)await A(J)}},y6=($)=>async(Y,X,J={headers:{}})=>{for(let Z=0;Z<$.event.error.length;Z++){let W=$.event.error[Z]({request:Y,code:X.code??X[J$]??"UNKNOWN",error:X,set:J});if(W instanceof Promise)W=await W;if(W!==void 0&&W!==null)return s0(W,J)}return new Response(typeof X.cause==="string"?X.cause:X.message,{headers:J.headers,status:X.status??500})};var W$=a0(f0(),1),Z$=a0(d$(),1);try{Z$.TypeSystem.Format("email",($)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test($)),Z$.TypeSystem.Format("uuid",($)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)),Z$.TypeSystem.Format("date",($)=>!Number.isNaN(new Date($).getTime())),Z$.TypeSystem.Format("date-time",($)=>!Number.isNaN(new Date($).getTime()))}catch($){}var v6=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},g8=($,Y)=>{if(!(Y instanceof Blob))return!1;if($.minSize&&Y.size<v6($.minSize))return!1;if($.maxSize&&Y.size>v6($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!Y.type.startsWith($.extension))return!1}else{for(let X=0;X<$.extension.length;X++)if(Y.type.startsWith($.extension[X]))return!0;return!1}return!0},i6={Numeric:Z$.TypeSystem.Type("Numeric",{}),File:Z$.TypeSystem.Type("File",g8),Files:Z$.TypeSystem.Type("Files",($,Y)=>{if(!Array.isArray(Y))return g8($,Y);if($.minItems&&Y.length<$.minItems)return!1;if($.maxItems&&Y.length>$.maxItems)return!1;for(let X=0;X<Y.length;X++)if(!g8($,Y[X]))return!1;return!0})};W$.Type.Numeric=($)=>{return W$.Type.Number({...$,elysiaMeta:"Numeric"})};W$.Type.URLEncoded=($,Y)=>W$.Type.Object($,{...Y,elysiaMeta:"URLEncoded"});W$.Type.File=($)=>i6.File({elysiaMeta:"File",default:"File",...$,extension:$?.type,type:"string",format:"binary"});W$.Type.Files=($)=>i6.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});class b1{config;dependencies={};store={};meta={schema:Object.create(null),defs:Object.create(null),exposed:Object.create(null)};decorators={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],error:[],stop:[]};server=null;$schema=null;error={};router=new e0;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsRouter;dynamicRouter=new e0;lazyLoadModules=[];path="";constructor($){this.config={forceErrorEncapsulation:!1,prefix:"",aot:!0,strictPath:!1,scoped:!1,...$,seed:$?.seed===void 0?"":$?.seed}}add($,Y,X,J,{allowMeta:Z=!1,skipPrefix:W=!1}={allowMeta:!1,skipPrefix:!1}){if(Y=Y===""?Y:Y.charCodeAt(0)===47?Y:`/${Y}`,this.config.prefix&&!W)Y=this.config.prefix+Y;const q=this.meta.defs;if(J?.type)switch(J.type){case"text":J.type="text/plain";break;case"json":J.type="application/json";break;case"formdata":J.type="multipart/form-data";break;case"urlencoded":J.type="application/x-www-form-urlencoded";break;case"arrayBuffer":J.type="application/octet-stream";break;default:break}const M={body:V0(J?.body??this.$schema?.body,{dynamic:!this.config.aot,models:q}),headers:V0(J?.headers??this.$schema?.headers,{dynamic:!this.config.aot,models:q,additionalProperties:!0}),params:V0(J?.params??this.$schema?.params,{dynamic:!this.config.aot,models:q}),query:V0(J?.query??this.$schema?.query,{dynamic:!this.config.aot,models:q}),response:I8(J?.response??this.$schema?.response,{dynamic:!this.config.aot,models:q})},A=F$(this.event,J),D=Y.endsWith("/")?Y.slice(0,Y.length-1):Y+"/";if(this.config.aot===!1){if(this.dynamicRouter.add($,Y,{validator:M,hooks:A,content:J?.type,handle:X}),this.config.strictPath===!1)this.dynamicRouter.add($,D,{validator:M,hooks:A,content:J?.type,handle:X});this.routes.push({method:$,path:Y,composed:null,handler:X,hooks:A});return}const N=d6({path:Y,method:$,hooks:A,validator:M,handler:X,handleError:this.handleError,meta:Z?this.meta:void 0,onRequest:this.event.request,config:this.config});if(this.routes.push({method:$,path:Y,composed:N,handler:X,hooks:A}),Y.indexOf(":")===-1&&Y.indexOf("*")===-1){const K=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(N),this.staticRouter.variables+=`const st${K} = staticRouter.handlers[${K}]\n`,!this.staticRouter.map[Y])this.staticRouter.map[Y]={code:""};if($==="ALL")this.staticRouter.map[Y].all=`default: return st${K}(ctx)\n`;else this.staticRouter.map[Y].code+=`case '${$}': return st${K}(ctx)\n`;if(!this.config.strictPath){if(!this.staticRouter.map[D])this.staticRouter.map[D]={code:""};if($==="ALL")this.staticRouter.map[D].all=`default: return st${K}(ctx)\n`;else this.staticRouter.map[D].code+=`case '${$}': return st${K}(ctx)\n`}}else if(this.router.add($,Y,N),!this.config.strictPath)this.router.add($,Y.endsWith("/")?Y.slice(0,Y.length-1):Y+"/",N)}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($){return this.on("parse",$),this}onTransform($){return this.on("transform",$),this}onBeforeHandle($){return this.on("beforeHandle",$),this}onAfterHandle($){return this.on("afterHandle",$),this}onResponse($){return this.on("response",$),this}addError($,Y){if(typeof $==="string"&&Y)return Y.prototype[J$]=$,this;for(let[X,J]of Object.entries($))J.prototype[J$]=X;return this}onError($){return this.on("error",$),this}onStop($){return this.on("stop",$),this}on($,Y){switch(Y=B6(Y),$){case"start":this.event.start.push(Y);break;case"request":this.event.request.push(Y);break;case"response":this.event.onResponse.push(Y);break;case"parse":this.event.parse.splice(this.event.parse.length-1,0,Y);break;case"transform":this.event.transform.push(Y);break;case"beforeHandle":this.event.beforeHandle.push(Y);break;case"afterHandle":this.event.afterHandle.push(Y);break;case"error":this.event.error.push(Y);break;case"stop":this.event.stop.push(Y);break}return this}group($,Y,X){const J=new b1({...this.config,prefix:""});if(J.store=this.store,this.wsRouter)J.use(_1());const Z=typeof Y==="object",W=(Z?X:Y)(J);if(this.decorators=X$(this.decorators,J.decorators),W.event.request.length)this.event.request=[...this.event.request,...W.event.request];if(W.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...W.event.onResponse];if(this.model(W.meta.defs),Object.values(J.routes).forEach(({method:q,path:M,handler:A,hooks:D})=>{if(M=this.config.prefix+$+M,Z){const N=Y,K=D;if(J.wsRouter?.find("subscribe",M)){const B=J.wsRouter.history.find(([C,S])=>M===S);if(!B)return;return this.ws(M,B[2])}this.add(q,M,A,F$(N,{...K,error:!K.error?W.event.error:Array.isArray(K.error)?[...K.error,...W.event.error]:[K.error,...W.event.error]}))}else{if(J.wsRouter?.find("subscribe",M)){const K=J.wsRouter.history.find(([w,B])=>M===B);if(!K)return;return this.ws(M,K[2])}this.add(q,M,A,F$(D,{error:W.event.error}),{skipPrefix:!0})}}),J.wsRouter&&this.wsRouter)J.wsRouter.history.forEach(([q,M,A])=>{if(M=this.config.prefix+$+M,M==="/")this.wsRouter?.add(q,$,A);else this.wsRouter?.add(q,`${$}${M}`,A)});return this}guard($,Y){if(!Y)return this.event=C1(this.event,$),this.$schema={body:$.body,headers:$.headers,params:$.params,query:$.query,response:$.response},this;const X=new b1;if(X.store=this.store,this.wsRouter)X.use(_1());const J=Y(X);if(this.decorators=X$(this.decorators,X.decorators),J.event.request.length)this.event.request=[...this.event.request,...J.event.request];if(J.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...J.event.onResponse];if(this.model(J.meta.defs),Object.values(X.routes).forEach(({method:Z,path:W,handler:q,hooks:M})=>{if(X.wsRouter?.find("subscribe",W)){const D=X.wsRouter.history.find(([N,K])=>W===K);if(!D)return;return this.ws(W,D[2])}this.add(Z,W,q,F$($,{...M,error:!M.error?J.event.error:Array.isArray(M.error)?[...M.error,...J.event.error]:[M.error,...J.event.error]}))}),X.wsRouter&&this.wsRouter)X.wsRouter.history.forEach(([Z,W,q])=>{this.wsRouter?.add(Z,W,q)});return this}use($){const Y=(X)=>{if(typeof X==="function"){const q=X(this);if(q instanceof Promise)return this.lazyLoadModules.push(q.then((M)=>M.compile())),this;return q}const J=X.config.scoped;if(!J)this.decorators=X$(this.decorators,X.decorators),this.state(X.store),this.model(X.meta.defs),this.addError(X.error);const{config:{name:Z,seed:W}}=X;if(Object.values(X.routes).forEach(({method:q,path:M,handler:A,hooks:D})=>{if(X.wsRouter?.find("subscribe",M)){const K=X.wsRouter.history.find(([w,B])=>M===B);if(!K)return;return this.ws(M,K[2])}this.add(q,M,A,F$(D,{error:X.event.error}))}),!J)if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];const q=W!==void 0?U6(Z+JSON.stringify(W)):0;if(this.dependencies[Z].some((M)=>q===M))return this;this.dependencies[Z].push(q),this.event=C1(this.event,_8(X.event),q)}else this.event=C1(this.event,_8(X.event));return this};if($ instanceof Promise)return this.lazyLoadModules.push($.then((X)=>{if(typeof X==="function")return X(this);if(typeof X.default==="function")return X.default(this);return Y(X.default)}).then((X)=>X.compile())),this;else return Y($);return this}mount($,Y){if(typeof $==="function"||$.length===0||$==="/"){const Z=typeof $==="function"?$:Y,W=async({request:q,path:M})=>Z(new Request("http://a.cc"+M||"/",q));return this.all("/",W,{type:"none"}),this.all("/*",W,{type:"none"}),this}const X=$.length,J=async({request:Z,path:W})=>Y(new Request("http://a.cc"+W.slice(X)||"/",Z));return this.all($,J,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),J,{type:"none"}),this}get($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("GET",J,Y,X);return this}post($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("POST",J,Y,X);return this}put($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("PUT",J,Y,X);return this}patch($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("PATCH",J,Y,X);return this}delete($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("DELETE",J,Y,X);return this}options($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("OPTIONS",J,Y,X);return this}all($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("ALL",J,Y,X);return this}head($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("HEAD",J,Y,X);return this}trace($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("TRACE",J,Y,X);return this}connect($,Y,X){if(typeof $==="string")$=[$];for(let J of $)this.add("CONNECT",J,Y,X);return this}ws($,Y){if(!this.wsRouter)throw new Error("Can't find WebSocket. Please register WebSocket plugin first by importing 'elysia/ws'");if(typeof $==="string")$=[$];for(let X of $)this.wsRouter.add("subscribe",X,Y),this.get(X,(J)=>{if(this.server?.upgrade(J.request,{headers:typeof Y.upgrade==="function"?Y.upgrade(J):Y.upgrade,data:{...J,id:Date.now(),headers:J.request.headers.toJSON(),message:V0(Y?.body,{models:this.meta.defs}),transformMessage:!Y.transform?[]:Array.isArray(Y.transformMessage)?Y.transformMessage:[Y.transformMessage]}}))return;return J.set.status=400,"Expected a websocket connection"},{beforeHandle:Y.beforeHandle,transform:Y.transform,headers:Y?.headers,params:Y?.params,query:Y?.query});return this}route($,Y,X,{config:J,...Z}={config:{allowMeta:!1}}){if(typeof Y==="string")Y=[Y];for(let W of Y)this.add($,W,X,Z,J);return this}state($,Y){if(typeof $==="object")return this.store=X$(this.store,$),this;if(!($ in this.store))this.store[$]=Y;return this}decorate($,Y){if(typeof $==="object")return this.decorators=X$(this.decorators,$),this;if(!($ in this.decorators))this.decorators[$]=Y;return this}derive($){return $.$elysia="derive",this.onTransform($)}schema($){const Y=this.meta.defs;return this.$schema={body:V0($.body,{models:Y}),headers:V0($?.headers,{models:Y,additionalProperties:!0}),params:V0($?.params,{models:Y}),query:V0($?.query,{models:Y}),response:V0($?.response,{models:Y})},this}compile(){if(this.fetch=this.config.aot?x8(this):k8(this),typeof this.server?.reload==="function")this.server.reload({...this.server,fetch:this.fetch});return this}handle=async($)=>this.fetch($);fetch=($)=>(this.fetch=this.config.aot?x8(this):k8(this))($);handleError=async($,Y,X)=>(this.handleError=this.config.aot?V8(this):y6(this))($,Y,X);outerErrorHandler=($)=>new Response($.message,{status:$?.status??500});listen=($,Y)=>{if(!Bun)throw new Error("Bun to run");if(this.compile(),typeof $==="string"){if($=+$.trim(),Number.isNaN($))throw new Error("Port must be a numeric value")}const X=this.fetch,J=typeof $==="object"?{development:!t$,...this.config.serve,...$,fetch:X,error:this.outerErrorHandler}:{development:!t$,...this.config.serve,port:$,fetch:X,error:this.outerErrorHandler};if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");this.server=Bun?.serve(J);for(let Z=0;Z<this.event.start.length;Z++)this.event.start[Z](this);if(Y)Y(this.server);return Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!0)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");this.server.stop();for(let $=0;$<this.event.stop.length;$++)await this.event.stop[$](this)};get modules(){return Promise.all(this.lazyLoadModules)}model($,Y){if(typeof $==="object")Object.entries($).forEach(([X,J])=>{if(!(X in this.meta.defs))this.meta.defs[X]=J});else this.meta.defs[$]=Y;return this}}var export_t=W$.Type;export{_1 as ws,export_t as t,w0 as mergeObjectArray,F$ as mergeHook,X$ as mergeDeep,s0 as mapResponse,i0 as mapEarlyResponse,j1 as mapCompactResponse,V0 as getSchemaValidator,I8 as getResponseSchemaValidator,b1 as default,K0 as ValidationError,f6 as ParseError,U$ as NotFoundError,O1 as InternalServerError,b1 as Elysia};

//# debugId=B83196B8AB5856A164756e2164756e21
